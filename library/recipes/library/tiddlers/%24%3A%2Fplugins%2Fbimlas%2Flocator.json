{"title":"$:/plugins/bimlas/locator","description":"Locator: Discover and search by context","author":"bimlas","version":"2.0.1","core-version":">=5.1.18","source":"https://gitlab.com/bimlas/tw5-locator","plugin-type":"plugin","list":"README/README README/macros README/TIPS README/CHANGELOG README/LICENSE","dependents":"","type":"application/json","text":"{\"tiddlers\":{\"$:/plugins/bimlas/locator/README/CHANGELOG\":{\"title\":\"$:/plugins/bimlas/locator/README/CHANGELOG\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"!! 2.0.1\\n\\n[[See GitLab for detailed change history of this release|https://gitlab.com/bimlas/tw5-locator/compare/v2.0.0...v2.0.1]]\\n\\n* Add MIT license\\n\\n!! 2.0.0\\n\\n[[See GitLab for detailed change history of this release|https://gitlab.com/bimlas/tw5-locator/compare/v1.5.0...v2.0.0]]\\n\\n''ALMOST COMPLETE REWRITING, BACKWARDS INCOMPATIBLE CHANGES ARE INTRODUCED''\\n\\n* ''It does not require the `kin` filter operator at all''\\r\\n* ''You can filter to any field besides the tags''\\r\\n* You can use the standard search from any `locator-view`\\r\\n* You can use any field to link tiddlers (as \\\"tags\\\")\\r\\n* You can also navigate through tiddler links\\r\\n* You can use arbitrary templates to display context items and field values\\r\\n* ''INCOMPATIBLE CHANGES''<br />//Before upgrading to the new version, make a backup (as before upgrading any plugin) and make the following changes.//\\r\\n** Renamed `locator-tags` to `locator-fields`<br />//Change the macro call in your tiddlers//\\r\\n** `locator-view` does not supporting `finalFilter` and `tagFilter`<br />//Remove them from your macrocalls//\\r\\n** Removed `filter-grandchildren` filter<br />//Because it can no longer be passed through parameters.//\\r\\n** The \\\"Open in Locator sidebar\\\" toolbar button is moved from `$:/plugins/bimlas/locator/viewtemplate/open-in-sidebar` to `$:/plugins/bimlas/locator/viewtemplate/open-in-sidebar` and its code is changed as well<br />//Compare the old tiddler with the shadow and note the changes if any. Transfer them to the new tiddler and delete the old tiddler.//\\n\\n!! 1.5.0\\n\\n[[See GitLab for detailed change history of this release|https://gitlab.com/bimlas/tw5-locator/compare/v1.4.0...v1.5.0]]\\n\\n* Move tiddler from current context to higher- or subtopic by drag-n-dropping in the Locator sidebar\\r\\n* Assign any tiddler to any of the titles in the Locator sidebar by drag-n-dropping\\r\\n* Show the (top-level) base tag to be able to move the tiddler titles there\\r\\n* Add button to open search results in advanced search\\r\\n* Show buttons using the Kin filter only when the filter operator is available\\r\\n* Fix related tag issue (not all of them were listed)\\r\\n* Fix whitespace issue\\r\\n* Refactor the code\\r\\n* Add tutorial to the demo\\n\\n!! 1.4.0\\n\\n[[See GitLab for detailed change history of this release|https://gitlab.com/bimlas/tw5-locator/compare/v1.3.1...v1.4.0]]\\n\\n* When there was a space in the search string and \\\"new tiddler\\\" button is used from search, the tiddler title was encapsulated (`[[title with spaces]]`)\\r\\n* When there was a space in any of the breadcrumbs in sidebar and \\\"new tiddler\\\" button is used from it, the tiddler got all of the breadcrumb tags, the title with spaces was encapsulated (literally `[[title with spaces]]` tag)\\r\\n* Add more tips to [[$:/plugins/bimlas/locator/README/TIPS]]\\r\\n* Add descriptive tooltip to buttons\\n\\n!! 1.3.1\\n\\n[[See GitLab for detailed change history of this release|https://gitlab.com/bimlas/tw5-locator/compare/v1.3.0...v1.3.1]]\\n\\n* Add base tag if there is no breadcrumbs when creating new tiddler in current context\\r\\n* Reword documentation\\n\\n!! 1.3.0\\n\\n[[See GitLab for detailed change history of this release|https://gitlab.com/bimlas/tw5-locator/compare/v1.2.0...v1.3.0]]\\n\\n* Create new tiddler from search text\\n\\n!! 1.2.0\\n\\n[[See GitLab for detailed change history of this release|https://gitlab.com/bimlas/tw5-locator/compare/v1.1.0...v1.2.0]]\\n\\n* Add button to create new tiddler in current context\\r\\n* Ability to use additional filter on tags\\n\\n!! 1.1.0\\n\\n[[See GitLab for detailed change history of this release|https://gitlab.com/bimlas/tw5-locator/compare/v1.0.0...v1.1.0]]\\n\\n* ''I realized that most functions work without the `kin` filter''\\r\\n* Use the same \\\"style\\\" for breadcrumb- and list items\\r\\n* Show real tags instead of tag pills\\r\\n* Turn off filter of direct tag in the breadcrumbs by its tag icon\\r\\n* Ancestor tags in breadcrumbs of search are operating like direct labels, they can be removed one by one\\n\\n!! 1.0.0\\n\\n* First public release\\r\\n\"},\"$:/plugins/bimlas/locator/README/LICENSE\":{\"title\":\"$:/plugins/bimlas/locator/README/LICENSE\",\"text\":\"MIT License\\n\\nCopyright (c) since 2020 BimbaLaszlo <bimbalaszlo@gmail.com> (https://bimlas.gitlab.io/)\\n\\nPermission is hereby granted, free of charge, to any person obtaining a copy\\r\\nof this software and associated documentation files (the \\\"Software\\\"), to deal\\r\\nin the Software without restriction, including without limitation the rights\\r\\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\\r\\ncopies of the Software, and to permit persons to whom the Software is\\r\\nfurnished to do so, subject to the following conditions:\\n\\nThe above copyright notice and this permission notice shall be included in all\\r\\ncopies or substantial portions of the Software.\\n\\nTHE SOFTWARE IS PROVIDED \\\"AS IS\\\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\\r\\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\\r\\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\\r\\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\\r\\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\\r\\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\\r\\nSOFTWARE.\\r\\n\"},\"$:/plugins/bimlas/locator/README/README\":{\"title\":\"$:/plugins/bimlas/locator/README/README\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"! Locator\\n\\nLocator provides ''a universal interface for navigating between your tiddlers and searching, filtering them'' without the need to write [[filter expressions|https://tiddlywiki.com/#Filters]]. The plugin contains ''a table of contents widget and an enhanced search engine'' that contains a ''visual filter builder to filter results by tags and field values''. You can ''organize the tiddlers to any number of trees, even by custom fields or links in text''. Unlike [[classic Table of Contents|https://tiddlywiki.com/#Table-of-Contents%20Macros%20(Examples)]], [[standard search|$:/core/ui/AdvancedSearch/Standard]], [[filter search|$:/core/ui/AdvancedSearch/Filter]] and [[list of tags|$:/core/ui/MoreSideBar/Tags]], this plugin handles these functions organically.\\n\\n* https://bimlas.gitlab.io/tw5-locator (demo + install)\\r\\n* https://gitlab.com/bimlas/tw5-locator (main repository)\\r\\n* https://github.com/bimlas/tw5-locator (mirror, ''please star if you like the plugin'')\\n\\n! Benefits compared to built-in solutions\\n\\n* ''Shows field values''<br/>You can mark a tiddler with multiple tags and field values, but in the classic ToC you don't see them while browsing, in Locator you can apply them as filters.\\r\\n* ''Easy way to search for field values''<br/>Find tags, field values in the standard search based on part of their name or view the all fields of the search results at a glance.\\r\\n* ''Limit the scope of search''<br/>You don't have to store your recipes and family tree in a separate wiki just to make them easier to find: you can define the scope of your search with some clicks (without the need to write filters in [[$:/AdvancedSearch]]).\\r\\n* ''Reorder the hierarchy with drag-n-drop''<br />You can easily move tiddlers between topics by drag-n-dropping them.\\r\\n* ''Create mindmaps''<br />You can associate tiddlers with any field other than the tag, so you can create complex graphs that you can browse through text only user interface.\\r\\n* ''There is no need to include a table of contents in the main tiddler of each topic''<br/>Just press the \\\"Locator sidebar\\\" button on the tiddler's toolbar and you can browse it's children, links right away in the sidebar.\\r\\n* ''Create new tiddler in current scope''<br />The \\\"new tiddler\\\" button in Locator creates a new tiddler pre-filled with the currently selected field values and named by the search query (like a special \\\"new here\\\" button).\\r\\n* ''Phone friendlier''<br/>The width of the classic ToC is increasing and the size of the text is decrasing as we move down in the context, while Locator remains readable.\\n\\n! Usage\\n\\nSee the [[demo|https://bimlas.gitlab.io/tw5-locator]] for a complete tutorial\\n\\n! Installation instructions\\n\\n''The plugin consists of separate parts'', each of them can be used on its own, so ''it is possible to use only the parts you like'', but they can be used most effectively together because ''they interact with each other''.\\n\\nTo add the plugin to your own ~TiddlyWiki5, just drag this link to the browser window and ''create or drag the required tiddlers from the demo'':\\n\\n$:/plugins/bimlas/locator\\n\\nFor other installation options see the links above.\\n\\n//Select the next tab to continue.//\\r\\n\"},\"$:/plugins/bimlas/locator/README/TIPS\":{\"title\":\"$:/plugins/bimlas/locator/README/TIPS\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"! Tips\\n\\n!! Organic navigation\\n\\n* In `locator-fields`, look for a tag and apply it recursively; the `locator-search` only affects tiddlers associated with it at any depth\\r\\n* Click on the tag in `locator-fields` and open its tiddler, then click on the \\\"locator sidebar\\\" button; the `locator-view` sidebar will show it's hierarchy\\r\\n* Navigate in the hierarchy in `locator-view` sidebar then search for a term in `locator-search`; pressing the \\\"search in context\\\" button restricting the search to the context of `locator-view` sidebar\\r\\n* If you cannot find what you are searching for, then you may want to create a new tiddler, use the \\\"new tiddler\\\" button in one of the Locator macros\\n\\n!! Taking good habits\\n\\n''To get the least chance of writing the same note you wrote earlier, look for a new tiddler before creating a note. To force yourself'', hide the \\\"new tiddler\\\" button inside the Page Toolbar and ''use the \\\"new tiddler\\\" button inside the Locator search'', so if you want to create a new tiddler you must first look for it. If you are absolutely sure that there is no tiddler yet and you need to create a new tiddler, this solution is also useful because search text defines the default name of the new tiddler.\\n\\n!! Let the \\\"Locator sidebar\\\" button automatically focus to the Locator sidebar\\n\\nFor example, the More -> Tags sidebar is currently open when we use the \\\"Locator sidebar\\\" toolbar button on one of the tiddlers, but we do not see the effect because the Locator sidebar is not visible, thus we need to modify to let button automatically open the corresponding sidebar.\\n\\n* If we don't know exactly, look for the sidebar tiddler's title (used as `text` parameter in the code below)\\r\\n** Open the Advanced Search -> Filter and look for the sidebar name in the `caption` field, for example `[caption[Locator]]` will result [[Locator view]]\\r\\n* Find the state tiddler that contains the sidebar tiddler's title (used as `$tiddler` parameter in the code below)\\r\\n** Open the Advanced Search -> Filter and look for `[text[Locator view]]` for example\\r\\n** Switch between Locator sidebar and another sidebar to see which state tiddler is changing, this is what we are looking for ([[$:/state/tab/sidebar--595412856]] for example)\\r\\n* Use the name of the state tiddler and the title of the sidebar in the code below and add this line to [[$:/plugins/bimlas/locator/viewtemplate/open-in-sidebar]] tiddler\\n\\n```\\r\\n<!-- Original code of the button... -->\\r\\n...\\r\\n<$button tooltip=\\\"Browse hierarchy of tag in Locator sidebar\\\" aria-label=\\\"locator sidebar\\\" class=<<tv-config-toolbar-class>>>\\r\\n<!-- ADD THIS LINE -->\\r\\n<$action-setfield $tiddler=\\\"$:/state/tab/sidebar--595412856\\\" text=\\\"Locator view\\\"/>\\r\\n```\\n\\nIf you rename the sidebar, you must also update this change! See [[this thread on Google Groups|https://groups.google.com/d/msg/tiddlywiki/xAe_fvhzoCY/UoKZc7ZZDQAJ]] for details.\\n\\n!! Speed up (on phones)\\n\\n!!! Conditional view\\n\\nBecause we don't look at the table of contents and search results at the same time, we can ''hide the Locator while we are using the standard search''.\\n\\nTo achieve this, place the Locator view in the following condition:\\n\\n```\\r\\n<$reveal type=\\\"match\\\" default=\\\"\\\" text={{{ [prefix[$:/state/popup/search-dropdown]] }}}>\\r\\n  <<locator-view baseTitle:\\\"TableOfContents\\\">>\\r\\n</$reveal>\\r\\n```\\n\\n''When you open TiddlyWiki'', the search entry is in focus by default, so ''the Locator sidebar is not visible''. To fix this, change the text of [[$:/config/Search/AutoFocus]] [[hidden setting|https://tiddlywiki.com/#Hidden%20Setting%3A%20Search%20AutoFocus]] to `false`.\\n\\n//Select the next tab to continue.//\\r\\n\"},\"$:/plugins/bimlas/locator/README/macros\":{\"title\":\"$:/plugins/bimlas/locator/README/macros\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"! Usage of the macros\\n\\n!! `locator-view`\\n\\nThis is ''a [[Table of Contents macro|https://tiddlywiki.com/#Table-of-Contents%20Macros%20(Examples)]] that lets you navigate the wiki'' just as you would with a file manager on the file system. The macro can be placed anywhere you want, for example put it in the sidebar.\\n\\n* Create a new tiddler\\r\\n* Add the [[$:/tags/SideBar]] tag\\r\\n* Add the `caption` field to change the title of the tab (\\\"Contents\\\" for example)\\r\\n* Call the macro by placing this text in the tiddler:\\n\\n```\\r\\n<<locator-view baseTitle:\\\"TableOfContents\\\">>\\r\\n```\\n\\nOptional parameters:\\n\\n; `fieldOfRelationship` (`tags` by default)\\r\\n: The default field which the tree is based on.\\n\\n; `templateOfContextItems` (`$:/plugins/bimlas/locator/field-templates/link` by default)\\r\\n: The default template to display the context items with.\\n\\n!! `locator-search` and `locator-fields`\\n\\nThe `locator-search` macro can be used in the same way as standard search, but ''you can narrow the scope of the search to the context by the fields filter'', in `locator-fields` you can `search for field values`.\\n\\n* Create a new tiddler\\r\\n* Add the [[$:/tags/SearchResults]] tag\\r\\n* Add the `caption` field to change the title of the tab (\\\"Locator\\\" for example)\\r\\n* Call the macro by placing this text in the tiddler:\\n\\n```\\r\\n<<locator-search>>\\r\\n```\\n\\nDo the same with `<<locator-fields>>` macro.\\n\\nIf you want to use `locator-fields` in the sidebar (like the sidebar -> More -> Tags tab) insted of standard search, you should also define the `searchTiddler` variable before the macro call:\\n\\n* Create a new tiddler\\r\\n* Add the [[$:/tags/SideBar]] tag\\r\\n* Add the `caption` field to change the title of the tab (\\\"Fields\\\" for example)\\r\\n* Call the macro by placing this text in the tiddler:\\n\\n```\\r\\n<$vars searchTiddler=\\\" \\\">\\r\\n  <<locator-fields>>\\r\\n</$vars>\\r\\n```\\n\\n//Select the next tab to continue.//\\r\\n\"},\"$:/plugins/bimlas/locator/actions/add-field-value\":{\"title\":\"$:/plugins/bimlas/locator/actions/add-field-value\",\"tags\":\"$:/tags/Actions\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"\\\\define assign-value()\\r\\n  <$action-setfield $tiddler=<<actionTiddler>> $field=<<currentField>> $value=<<currentTiddler>>/>\\r\\n\\\\end\\n\\n\\\\define assign-list-item()\\r\\n  <$action-listops $tiddler=<<actionTiddler>> $field=<<currentField>> $subfilter=\\\"[all[current]]\\\"/>\\r\\n\\\\end\\n\\n<$list filter=\\\"[title<currentField>subfilter<filter-field-is-list>]\\\" emptyMessage=<<assign-value>> variable=\\\"null\\\">\\r\\n  <<assign-list-item>>\\r\\n</$list>\\r\\n\"},\"$:/plugins/bimlas/locator/actions/add-to-history\":{\"title\":\"$:/plugins/bimlas/locator/actions/add-to-history\",\"tags\":\"$:/tags/Actions\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"<$action-listops $tiddler=<<contextState>> $field=\\\"history\\\" $subfilter=\\\"[all[current]]\\\"/>\\r\\n{{$:/plugins/bimlas/locator/actions/remove-filters}}\\r\\n\"},\"$:/plugins/bimlas/locator/actions/move-to-another-context\":{\"title\":\"$:/plugins/bimlas/locator/actions/move-to-another-context\",\"tags\":\"$:/tags/Actions\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"\\\\define add-action-tiddler-to-current-tiddler()\\r\\n  <$tiddler tiddler={{{ [subfilter<filter-history>last[]] }}}>\\r\\n    {{||$:/plugins/bimlas/locator/actions/remove-field-value}}\\r\\n  </$tiddler>\\r\\n  {{||$:/plugins/bimlas/locator/actions/add-field-value}}\\r\\n\\\\end\\n\\n\\\\define add-current-tiddler-to-action-tiddler()\\r\\n  <$vars originalCurrentTiddler=<<currentTiddler>>>\\r\\n    <$tiddler tiddler=<<actionTiddler>>>\\r\\n      <$vars actionTiddler={{{ [subfilter<filter-history>last[]] }}}>\\r\\n        {{||$:/plugins/bimlas/locator/actions/remove-field-value}}\\r\\n      </$vars>\\r\\n      <$vars actionTiddler=<<originalCurrentTiddler>>>\\r\\n        {{||$:/plugins/bimlas/locator/actions/add-field-value}}\\r\\n      </$vars>\\r\\n    </$tiddler>\\r\\n  </$vars>\\r\\n\\\\end\\n\\n<$list filter=\\\"[title<contextState>locator-direction-of-traverse<currentField>regexp[to]]\\\" emptyMessage=<<add-current-tiddler-to-action-tiddler>> variable=\\\"null\\\">\\r\\n  <<add-action-tiddler-to-current-tiddler>>\\r\\n</$list>\\r\\n\"},\"$:/plugins/bimlas/locator/actions/remove-field-value\":{\"title\":\"$:/plugins/bimlas/locator/actions/remove-field-value\",\"tags\":\"$:/tags/Actions\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"\\\\define remove-value()\\r\\n  <$action-setfield $tiddler=<<actionTiddler>> $field=<<currentField>> $value=\\\"\\\"/>\\r\\n\\\\end\\n\\n\\\\define remove-list-item()\\r\\n  <$action-listops $tiddler=<<actionTiddler>> $field=<<currentField>> $subfilter=\\\"-[all[current]]\\\"/>\\r\\n\\\\end\\n\\n<$list filter=\\\"[title<currentField>subfilter<filter-field-is-list>]\\\" emptyMessage=<<remove-value>> variable=\\\"null\\\">\\r\\n  <<remove-list-item>>\\r\\n</$list>\\r\\n\"},\"$:/plugins/bimlas/locator/actions/remove-filters\":{\"title\":\"$:/plugins/bimlas/locator/actions/remove-filters\",\"tags\":\"$:/tags/Actions\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"<$action-deletetiddler $tiddler=<<intersectionState>>/>\\r\\n<$action-deletetiddler $tiddler=<<differenceState>>/>\\r\\n<$action-setfield $tiddler=<<contextState>> opened-fields-filters=\\\"\\\"/>\"},\"$:/plugins/bimlas/locator/buttons/clear-search-input\":{\"title\":\"$:/plugins/bimlas/locator/buttons/clear-search-input\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"<$button tooltip=\\\"Clear search text, show all results\\\" class=<<link-button-class>>>\\r\\n  <$action-setfield $tiddler=\\\"$:/temp/search\\\" text=\\\"   \\\"/>\\r\\n  {{$:/core/images/preview-open}}\\r\\n</$button>\\r\\n\"},\"$:/plugins/bimlas/locator/buttons/collapse-history\":{\"title\":\"$:/plugins/bimlas/locator/buttons/collapse-history\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"<$button tooltip=\\\"Collapse history\\\" class=<<link-button-class>>>\\r\\n  <$action-listops $tiddler=<<contextState>> $field=\\\"history\\\" $filter=\\\"[title<contextState>each:list-item[history]last[]]\\\"/>\\r\\n  {{$:/core/images/fold-button}}\\r\\n</$button>\\r\\n\"},\"$:/plugins/bimlas/locator/buttons/context-arrow\":{\"title\":\"$:/plugins/bimlas/locator/buttons/context-arrow\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"<$list filter=\\\"[title<contextState>field:invert-direction[yes]]\\\" emptyMessage={{$:/core/images/right-arrow}}>\\r\\n  {{$:/core/images/left-arrow}}\\r\\n</$list>\\r\\n\"},\"$:/plugins/bimlas/locator/buttons/copy-filter-to-advanced-search\":{\"title\":\"$:/plugins/bimlas/locator/buttons/copy-filter-to-advanced-search\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"<!--\\r\\nSince the search term may contain characters that affect the filter, I\\r\\ndo not copy the search term, I just refer to the tiddler.\\r\\n-->\\r\\n<$wikify name=\\\"filter\\\" text=\\\"<<filter-search-context>> +[search{<<searchTiddler>>}]\\\">\\r\\n  <$button tooltip=\\\"Continue filtering in advanced search\\\" class=<<link-button-class>>>\\r\\n    <$action-setfield $tiddler=\\\"$:/temp/advancedsearch\\\" text=<<filter>>/>\\r\\n    <$action-setfield $tiddler=\\\"$:/state/tab--1498284803\\\" text=\\\"$:/core/ui/AdvancedSearch/Filter\\\"/>\\r\\n    <$action-navigate $to=\\\"$:/AdvancedSearch\\\"/>\\r\\n    {{$:/core/images/advanced-search-button}}\\r\\n  </$button>\\r\\n</$wikify>\\r\\n\"},\"$:/plugins/bimlas/locator/buttons/create-new-tiddler\":{\"title\":\"$:/plugins/bimlas/locator/buttons/create-new-tiddler\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"\\\\define add-as-list()\\r\\n  <$action-listops $tiddler=\\\"$:/temp/bimlas/locator/new-tiddler\\\" $field=<<field>> $subfilter=<<__valueAsFilter__>>/>\\r\\n\\\\end\\n\\n\\\\define add-as-value()\\r\\n  <$action-setfield $tiddler=\\\"$:/temp/bimlas/locator/new-tiddler\\\" $field=<<field>> $value={{{ [subfilter<__valueAsFilter__>] }}}/>\\r\\n\\\\end\\n\\n\\\\define add-field-value(valueAsFilter)\\r\\n  <$list filter=\\\"[title<field>subfilter<filter-field-is-list>]\\\" emptyMessage=<<add-as-value>>>\\r\\n    <<add-as-list>>\\r\\n  </$list>\\r\\n\\\\end\\n\\n\\\\define add-filters-as-field-values()\\r\\n  <$list filter=\\\"[title<intersectionState>indexes[]]\\\" variable=\\\"field\\\">\\r\\n    <$list filter=\\\"[title<intersectionState>locator-selected-field-values<field>first[]]\\\">\\r\\n      <<add-field-value \\\"[title<intersectionState>locator-selected-field-values<field>]\\\">>\\r\\n    </$list>\\r\\n  </$list>\\r\\n\\\\end\\n\\n\\\\define add-to-current-context()\\r\\n  <$set name=\\\"field\\\" filter=<<filter-field-of-relationship>>>\\r\\n    <<add-field-value \\\"[subfilter<filter-history>last[]]\\\">>\\r\\n  </$set>\\r\\n\\\\end\\n\\n<$button tooltip=\\\"Create new tiddler in the current context\\\" class=<<link-button-class>>>\\r\\n  <<add-filters-as-field-values>>\\r\\n  <<add-to-current-context>>\\r\\n  <$action-sendmessage $message=\\\"tm-new-tiddler\\\" $param=\\\"$:/temp/bimlas/locator/new-tiddler\\\" title={{{ [title<titleOfNewTiddler>] [title{$:/language/DefaultNewTiddlerTitle}] -[[]] +[first[]] }}}/>\\r\\n  <$action-deletetiddler $tiddler=\\\"$:/temp/bimlas/locator/new-tiddler\\\"/>\\r\\n  {{$:/core/images/new-button}}\\r\\n</$button>\\r\\n\"},\"$:/plugins/bimlas/locator/buttons/go-down-to-context\":{\"title\":\"$:/plugins/bimlas/locator/buttons/go-down-to-context\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"\\\\define node()\\r\\n  <$button tooltip=\\\"Go to context, show chidlren of this tiddler\\\" class=<<link-button-class>> actions={{$:/plugins/bimlas/locator/actions/add-to-history}}>\\r\\n    {{$:/plugins/bimlas/locator/buttons/context-arrow}}\\r\\n  </$button>\\r\\n\\\\end\\n\\n\\\\define leaf()\\r\\n  <$button class=<<link-button-class>>>\\r\\n    {{$:/core/images/blank}}\\r\\n  </$button>\\r\\n\\\\end\\n\\n\\\\define go-down-to-context()\\r\\n  <!-- I have to use macro to use $(...)$ in filter expression -->\\r\\n  <$list filter=\\\"[all[current]locator-enlist-children:$(currentField)$<contextState>] [title<contextState>field:allow-to-open-leaves[yes]] +[first[]]\\\" emptyMessage=<<leaf>> variable=\\\"null\\\"><<node>></$list>\\r\\n\\\\end\\n\\n<<go-down-to-context>>\\r\\n\"},\"$:/plugins/bimlas/locator/buttons/go-up-to-context\":{\"title\":\"$:/plugins/bimlas/locator/buttons/go-up-to-context\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"\\\\define actions()\\r\\n  <$action-listops $tiddler=<<contextState>> $field=\\\"history\\\" $filter=\\\"[subfilter<filter-history>allbefore<currentTiddler>] [all[current]]\\\"/>\\r\\n  {{$:/plugins/bimlas/locator/actions/remove-filters}}\\r\\n\\\\end\\n\\n<$button tooltip=\\\"Go to context, show chidlren of this tiddler\\\" class=<<link-button-class>> actions=<<actions>>>\\r\\n  {{$:/plugins/bimlas/locator/buttons/context-arrow}}\\r\\n</$button>\\r\\n\"},\"$:/plugins/bimlas/locator/buttons/open-field-settings\":{\"title\":\"$:/plugins/bimlas/locator/buttons/open-field-settings\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"<$button\\r\\n  to=\\\"$:/plugins/bimlas/locator/settings/settings\\\"\\r\\n  tooltip=\\\"Open field settings\\\"\\r\\n  class=<<link-button-class>>\\r\\n>\\r\\n  {{$:/core/images/options-button}}<$list filter=\\\"[title<contextState>!regexp[^\\\\$:/state/bimlas/locator/search/]]\\\" variable=\\\"null\\\"> Open field settings</$list>\\r\\n</$button>\"},\"$:/plugins/bimlas/locator/buttons/remove-filters-of-current-field\":{\"title\":\"$:/plugins/bimlas/locator/buttons/remove-filters-of-current-field\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"\\\\define actions()\\r\\n  <$action-setfield $tiddler=<<intersectionState>> $index=<<currentField>> $value=\\\"\\\"/>\\r\\n  <$action-setfield $tiddler=<<differenceState>> $index=<<currentField>> $value=\\\"\\\"/>\\r\\n  <$action-listops $tiddler=<<contextState>> $field=\\\"opened-fields-filters\\\" $subfilter=\\\"-[<currentField>]\\\"/>\\r\\n  <$list filter=\\\"[<recursiveFilteringOfCurrentFieldAvailable>regexp[yes]]\\\" variable=\\\"null\\\">\\r\\n    <$action-setfield $tiddler=\\\"$:/state/bimlas/locator/search/recursive-filters/\\\" $index=<<currentField>> $value=\\\"\\\"/>\\r\\n  </$list>\\r\\n\\\\end\\n\\n<$list filter=\\\"[title<intersectionState>] [title<differenceState>] +[locator-selected-field-values<currentField>first[]]\\\" variable=\\\"null\\\">\\r\\n  <$button tooltip=\\\"Remove field filters\\\" class=<<link-button-class>> actions=<<actions>>>\\r\\n    {{$:/core/images/cancel-button}}\\r\\n  </$button>\\r\\n</$list>\"},\"$:/plugins/bimlas/locator/buttons/remove-filters\":{\"title\":\"$:/plugins/bimlas/locator/buttons/remove-filters\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"<$list filter=\\\"[title<intersectionState>] [title<differenceState>] +[locator-selected-field-values[]first[]]\\\" variable=\\\"null\\\">\\r\\n  <$button tooltip=\\\"Remove field filters\\\" class=<<link-button-class>> actions={{$:/plugins/bimlas/locator/actions/remove-filters}}>\\r\\n    {{$:/core/images/cancel-button}}\\r\\n  </$button>\\r\\n</$list>\"},\"$:/plugins/bimlas/locator/buttons/search-in-context\":{\"title\":\"$:/plugins/bimlas/locator/buttons/search-in-context\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"\\\\define copy-field(sourceTiddler destinationTiddler field)\\r\\n  <$set name=\\\"value\\\" tiddler=<<__sourceTiddler__>> field=<<__field__>>>\\r\\n    <$action-setfield $tiddler=<<__destinationTiddler__>> $field=<<__field__>> $value=<<value>>/>\\r\\n  </$set>\\r\\n\\\\end\\n\\n\\\\define clear-data-tiddler(tiddler)\\r\\n  <$action-deletetiddler $tiddler=<<__tiddler__>>/>\\r\\n  <$action-setfield $tiddler=<<__tiddler__>> type=\\\"application/json\\\"/>\\r\\n\\\\end\\n\\n\\\\define search-in-current-context()\\r\\n  <$action-listops $tiddler=\\\"$:/state/bimlas/locator/search/intersection/\\\" $index={{{ [subfilter<filter-field-of-relationship>] }}} $subfilter=\\\"[subfilter<filter-history>last[]]\\\"/>\\r\\n  <$action-listops $tiddler=\\\"$:/state/bimlas/locator/search/recursive-filters/\\\" $index={{{ [subfilter<filter-field-of-relationship>] }}} $filter=\\\"[subfilter<filter-history>last[]]\\\"/>\\r\\n\\\\end\\n\\n\\\\define copy-filters()\\r\\n  <$macrocall $name=\\\"copy-field\\\" sourceTiddler=<<intersectionState>> destinationTiddler=\\\"$:/state/bimlas/locator/search/intersection/\\\" field=\\\"text\\\"/>\\r\\n  <$macrocall $name=\\\"copy-field\\\" sourceTiddler=<<differenceState>> destinationTiddler=\\\"$:/state/bimlas/locator/search/difference/\\\" field=\\\"text\\\"/>\\r\\n\\\\end\\n\\n\\\\define reset-search-context()\\r\\n  <$action-deletetiddler $tiddler=\\\"$:/state/bimlas/locator/search/context/\\\"/>\\r\\n  <$list filter=\\\"[<recursiveFilteringAvailable>regexp[yes]]\\\" variable=\\\"null\\\">\\r\\n    <$macrocall $name=\\\"clear-data-tiddler\\\" tiddler=\\\"$:/state/bimlas/locator/search/recursive-filters/\\\"/>\\r\\n  </$list>\\r\\n  <$macrocall $name=\\\"clear-data-tiddler\\\" tiddler=\\\"$:/state/bimlas/locator/search/intersection/\\\"/>\\r\\n  <$macrocall $name=\\\"clear-data-tiddler\\\" tiddler=\\\"$:/state/bimlas/locator/search/difference/\\\"/>\\r\\n\\\\end\\n\\n<$button tooltip=\\\"Restrict search to this context (in full depth)\\\" class=<<link-button-class>>>\\r\\n  <<reset-search-context>>\\r\\n  <<copy-filters>>\\r\\n  <<search-in-current-context>>\\r\\n  {{$:/core/images/advanced-search-button}}\\r\\n</$button>\\r\\n\"},\"$:/plugins/bimlas/locator/buttons/toggle-context-settings\":{\"title\":\"$:/plugins/bimlas/locator/buttons/toggle-context-settings\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"\\\\define opened()\\r\\n  <$button tooltip=\\\"Toggle context settings\\\" class=<<link-button-class additionalClasses:\\\"active\\\">>>\\r\\n    <$action-setfield $tiddler=<<contextState>> $field=\\\"context-settings-opened\\\" $value=\\\"\\\"/>\\r\\n    {{$:/core/images/options-button}}\\r\\n  </$button>\\r\\n\\\\end\\n\\n\\\\define closed()\\r\\n  <$button tooltip=\\\"Toggle context settings\\\" class=<<link-button-class>>>\\r\\n    <$action-setfield $tiddler=<<contextState>> $field=\\\"context-settings-opened\\\" $value=\\\"yes\\\"/>\\r\\n    {{$:/core/images/options-button}}\\r\\n  </$button>\\r\\n\\\\end\\n\\n<$list filter=\\\"[title<contextState>field:context-settings-opened[yes]]\\\" emptyMessage=<<closed>>><<opened>></$list>\"},\"$:/plugins/bimlas/locator/edit-template/locator-references\":{\"title\":\"$:/plugins/bimlas/locator/edit-template/locator-references\",\"list-after\":\"$:/core/ui/EditTemplate/title\",\"tags\":\"$:/tags/EditTemplate\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"\\\\define prompt()\\r\\n  The following references to this tiddler in //<<__field__>>// [[Locator field|$:/plugins/bimlas/locator/settings/settings]] will not be automatically updated:\\r\\n\\\\end\\n\\n\\\\define children-by-field(field)\\r\\n  <$list filter=\\\"[title{!!draft.of}locator-enlist-children:$field$[]first[]]\\\" variable=\\\"null\\\">\\r\\n    <$vars stateTiddler=<<qualify \\\"$:/state/bimlas/locator/edit/references/$field$\\\">> >\\n\\n      <$reveal type=\\\"nomatch\\\" state=<<stateTiddler>> text=\\\"show\\\">\\r\\n        <$button set=<<stateTiddler>> setTo=\\\"show\\\" class=\\\"tc-btn-invisible\\\">\\r\\n          {{$:/core/images/right-arrow}}\\r\\n          <<prompt>>\\r\\n        </$button>\\r\\n      </$reveal>\\r\\n      <$reveal type=\\\"match\\\" state=<<stateTiddler>> text=\\\"show\\\">\\r\\n        <$button set=<<stateTiddler>> setTo=\\\"hide\\\" class=\\\"tc-btn-invisible\\\">\\r\\n          {{$:/core/images/down-arrow}}\\r\\n          <<prompt>>\\r\\n        </$button>\\r\\n      </$reveal>\\n\\n      <$reveal type=\\\"match\\\" state=<<stateTiddler>> text=\\\"show\\\">\\r\\n        <$list filter=\\\"[title{!!draft.of}locator-enlist-children:$field$[]]\\\" template=\\\"$:/core/ui/ListItemTemplate\\\">\\r\\n          <$link/>\\r\\n        </$list>\\r\\n      </$reveal>\\n\\n    </$vars>\\r\\n  </$list>\\r\\n\\\\end\\n\\n<$reveal state=\\\"!!draft.title\\\" type=\\\"nomatch\\\" text={{!!draft.of}} tag=\\\"div\\\">\\r\\n  <$list filter=\\\"[locator-enlist-relationship-fields[]] -[[tags]] -[[list]] -[[LINKS-IN-TEXT]]\\\" variable=\\\"currentField\\\">\\r\\n    <$macrocall $name=\\\"children-by-field\\\" field=<<currentField>>/>\\r\\n  </$list>\\r\\n</$reveal>\"},\"$:/plugins/bimlas/locator/field-templates/color\":{\"title\":\"$:/plugins/bimlas/locator/field-templates/color\",\"caption\":\"Color\",\"tags\":\"$:/tags/bimlas/locator/field-templates\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"<input type=\\\"color\\\" name=\\\"favcolor\\\" value=<<currentTiddler>> disabled> <$view field=\\\"title\\\"/>\"},\"$:/plugins/bimlas/locator/field-templates/edit-fields-plus-transclusion\":{\"title\":\"$:/plugins/bimlas/locator/field-templates/edit-fields-plus-transclusion\",\"caption\":\"Edit fields + Transclusion\",\"tags\":\"$:/tags/bimlas/locator/context-item-templates\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"\\\\define frame-classes() tc-tiddler-frame tc-tiddler-edit-frame $(missingTiddlerClass)$ $(shadowTiddlerClass)$ $(systemTiddlerClass)$\\n\\n{{||$:/plugins/bimlas/locator/field-templates/link}}\\r\\n<div class=<<frame-classes>> data-tiddler-title=<<currentTiddler>>>\\r\\n  <$fieldmangler>\\r\\n    {{||$:/core/ui/EditTemplate/tags}}\\r\\n    {{||$:/core/ui/EditTemplate/fields}}\\r\\n  </$fieldmangler>\\r\\n</div>\\r\\n<$transclude mode=\\\"block\\\"/>\\r\\n<hr style=\\\"border-top: double\\\"/>\"},\"$:/plugins/bimlas/locator/field-templates/edit-fields\":{\"title\":\"$:/plugins/bimlas/locator/field-templates/edit-fields\",\"caption\":\"Edit fields\",\"tags\":\"$:/tags/bimlas/locator/context-item-templates\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"\\\\define frame-classes() tc-tiddler-frame tc-tiddler-edit-frame $(missingTiddlerClass)$ $(shadowTiddlerClass)$ $(systemTiddlerClass)$\\n\\n{{||$:/plugins/bimlas/locator/field-templates/link}}\\r\\n<div class=<<frame-classes>> data-tiddler-title=<<currentTiddler>>>\\r\\n  <$fieldmangler>\\r\\n    {{||$:/core/ui/EditTemplate/tags}}\\r\\n    {{||$:/core/ui/EditTemplate/fields}}\\r\\n  </$fieldmangler>\\r\\n</div>\\r\\n<hr style=\\\"border-top: double\\\"/>\"},\"$:/plugins/bimlas/locator/field-templates/fields-plus-transclusion\":{\"title\":\"$:/plugins/bimlas/locator/field-templates/fields-plus-transclusion\",\"caption\":\"Fields + Transclusion\",\"tags\":\"$:/tags/bimlas/locator/context-item-templates\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"{{||$:/plugins/bimlas/locator/field-templates/link}}\\r\\n{{||$:/plugins/bimlas/locator/viewtemplate/field-list}}\\r\\n<$transclude mode=\\\"block\\\"/>\\r\\n<hr style=\\\"border-top: double\\\"/>\"},\"$:/plugins/bimlas/locator/field-templates/fields\":{\"title\":\"$:/plugins/bimlas/locator/field-templates/fields\",\"caption\":\"Fields\",\"tags\":\"$:/tags/bimlas/locator/context-item-templates\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"{{||$:/plugins/bimlas/locator/field-templates/link}}\\r\\n{{||$:/plugins/bimlas/locator/viewtemplate/field-list}}\\r\\n<hr style=\\\"border-top: double\\\"/>\"},\"$:/plugins/bimlas/locator/field-templates/icon\":{\"title\":\"$:/plugins/bimlas/locator/field-templates/icon\",\"caption\":\"Icon\",\"tags\":\"$:/tags/bimlas/locator/field-templates\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"<button class=\\\"tc-btn-invisible\\\" disabled><$transclude><<currentTiddler>></$transclude></button> {{||$:/plugins/bimlas/locator/field-templates/link}}\"},\"$:/plugins/bimlas/locator/field-templates/link\":{\"title\":\"$:/plugins/bimlas/locator/field-templates/link\",\"caption\":\"Link\",\"tags\":\"$:/tags/bimlas/locator/field-templates $:/tags/bimlas/locator/context-item-templates\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"<$link to=<<currentTiddler>>>\\r\\n  <$transclude field=\\\"caption\\\"><$view field=\\\"title\\\"/></$transclude>\\r\\n</$link>\"},\"$:/plugins/bimlas/locator/field-templates/tag\":{\"title\":\"$:/plugins/bimlas/locator/field-templates/tag\",\"caption\":\"Tag\",\"tags\":\"$:/tags/bimlas/locator/field-templates\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"<<tag>>\"},\"$:/plugins/bimlas/locator/field-templates/text\":{\"title\":\"$:/plugins/bimlas/locator/field-templates/text\",\"caption\":\"Text\",\"tags\":\"$:/tags/bimlas/locator/field-templates\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"<$view field=\\\"title\\\"/>\"},\"$:/plugins/bimlas/locator/field-templates/transclusion\":{\"title\":\"$:/plugins/bimlas/locator/field-templates/transclusion\",\"caption\":\"Transclusion\",\"tags\":\"$:/tags/bimlas/locator/context-item-templates\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"{{||$:/plugins/bimlas/locator/field-templates/link}}\\r\\n<br/>\\r\\n<$transclude mode=\\\"block\\\"/>\\r\\n<hr style=\\\"border-top: double\\\"/>\"},\"$:/plugins/bimlas/locator/macros/locator-fields\":{\"title\":\"$:/plugins/bimlas/locator/macros/locator-fields\",\"tags\":\"$:/tags/Macro\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"\\\\define locator-fields()\\r\\n  <!-- Hide internal macros, do not make them globally available -->\\r\\n  <$importvariables filter=\\\"[all[tiddlers+shadows]prefix[$:/plugins/bimlas/locator/macros/]]\\\">\\r\\n    <$vars\\r\\n      contextState=\\\"$:/state/bimlas/locator/search/context/\\\"\\r\\n      intersectionState=\\\"$:/state/bimlas/locator/search/intersection/\\\"\\r\\n      differenceState=\\\"$:/state/bimlas/locator/search/difference/\\\"\\r\\n      recursiveFilteringAvailable=\\\"yes\\\"\\r\\n    >\\n\\n      {{$:/plugins/bimlas/locator/templates/search-toolbar}} {{$:/plugins/bimlas/locator/buttons/remove-filters}}\\n\\n      <p><$checkbox tiddler=<<contextState>> field=\\\"limit-to-fields-of-filtered-tiddlers\\\" checked=\\\"yes\\\" unchecked=\\\"no\\\" default=\\\"yes\\\"> Limit to fields of filtered tiddlers</$checkbox></p>\\n\\n      <$list filter=\\\"[subfilter<filter-selected-field-values>first[]]\\\" emptyMessage=\\\"\\\"\\\"<$list filter=\\\"0\\\" variable=\\\"resultCount\\\" template=\\\"$:/language/Search/Matches\\\"/>\\\"\\\"\\\">\\r\\n        <$list filter=\\\"[subfilter<filter-search-context>count[]]\\\" variable=\\\"resultCount\\\" template=\\\"$:/language/Search/Matches\\\"/>\\r\\n      </$list>\\n\\n      <!-- searchTiddler variable does not available in transcluded tiddlers by default -->\\r\\n      <$set name=\\\"filterContextItems\\\" filter=\\\"[<contextState>field:limit-to-fields-of-filtered-tiddlers[no]]\\\" value=\\\"[!is[system]]\\\" emptyValue=<<filter-search-context>>>\\r\\n        <$vars searchedFieldValue={{$(searchTiddler)$}}>\\r\\n          {{$:/plugins/bimlas/locator/templates/field-names}}\\r\\n        </$vars>\\r\\n      </$set>\\n\\n      <$list filter=\\\"[subfilter<filter-selected-field-values>first[]]\\\">\\r\\n        <$list filter=\\\"[subfilter<filter-search-context>limit[250]]\\\" template=\\\"$:/core/ui/ListItemTemplate\\\"/>\\r\\n      </$list>\\n\\n    </$vars>\\r\\n  </$importvariables>\\r\\n\\\\end\\r\\n\"},\"$:/plugins/bimlas/locator/macros/locator-search\":{\"title\":\"$:/plugins/bimlas/locator/macros/locator-search\",\"tags\":\"$:/tags/Macro\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"\\\\define locator-search()\\r\\n  <!-- Hide internal macros, do not make them globally available -->\\r\\n  <$importvariables filter=\\\"[all[tiddlers+shadows]prefix[$:/plugins/bimlas/locator/macros/]]\\\">\\r\\n    <$vars\\r\\n      contextState=\\\"$:/state/bimlas/locator/search/context/\\\"\\r\\n      intersectionState=\\\"$:/state/bimlas/locator/search/intersection/\\\"\\r\\n      differenceState=\\\"$:/state/bimlas/locator/search/difference/\\\"\\r\\n      filterContextItems=\\\"[subfilter<filter-search-context>search{$(searchTiddler)$}]\\\"\\r\\n      recursiveFilteringAvailable=\\\"yes\\\"\\r\\n    >\\n\\n      {{$:/plugins/bimlas/locator/templates/search-toolbar}}\\n\\n      <$list filter=\\\"[subfilter<filterContextItems>count[]]\\\" variable=\\\"resultCount\\\" template=\\\"$:/language/Search/Matches\\\"/>\\n\\n      {{$:/plugins/bimlas/locator/templates/fields-filter}}\\n\\n      //<small>{{$:/language/Search/Matches/Title}}</small>//\\n\\n      <$list filter=\\\"[subfilter<filterContextItems>search:title{$(searchTiddler)$}limit[250]]\\\" template=\\\"$:/core/ui/ListItemTemplate\\\"/>\\n\\n      //<small>{{$:/language/Search/Matches/All}}</small>//\\n\\n      <$list filter=\\\"[subfilter<filterContextItems>limit[250]]\\\" template=\\\"$:/core/ui/ListItemTemplate\\\"/>\\n\\n    </$vars>\\r\\n  </$importvariables>\\r\\n\\\\end\\r\\n\"},\"$:/plugins/bimlas/locator/macros/locator-view\":{\"title\":\"$:/plugins/bimlas/locator/macros/locator-view\",\"tags\":\"$:/tags/Macro\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"\\\\define locator-view(baseTitle fieldOfRelationship:\\\"tags\\\" templateOfContextItems:\\\"$:/plugins/bimlas/locator/field-templates/link\\\")\\r\\n  <!-- Hide internal macros, do not make them globally available -->\\r\\n  <$importvariables filter=\\\"[all[tiddlers+shadows]prefix[$:/plugins/bimlas/locator/macros/]]\\\">\\r\\n    <$vars\\r\\n      contextState=\\\"$:/state/bimlas/locator/view/context/$(currentTiddler)$\\\"\\r\\n      intersectionState=\\\"$:/state/bimlas/locator/view/intersection/$(currentTiddler)$\\\"\\r\\n      differenceState=\\\"$:/state/bimlas/locator/view/difference/$(currentTiddler)$\\\"\\r\\n      defaultFieldOfRelationship=<<__fieldOfRelationship__>>\\r\\n    >\\r\\n      <!-- I have to create them nested because internal variables use external ones -->\\r\\n      <$vars currentField={{{ [subfilter<filter-field-of-relationship>] }}}>\\r\\n        <$vars filterContextItems=<<filter-view-context>>>\\r\\n          <div class=\\\"tc-table-of-contents\\\">\\n\\n            {{$:/plugins/bimlas/locator/templates/history}}\\n\\n            ---\\n\\n            {{$:/plugins/bimlas/locator/templates/context-settings}}\\r\\n            <div class=\\\"bimlas-locator right\\\">\\r\\n              {{||$:/plugins/bimlas/locator/templates/view-toolbar}}\\r\\n            </div>\\r\\n            {{$:/plugins/bimlas/locator/templates/fields-filter}}\\r\\n            <ol class=\\\"bimlas-locator\\\">\\r\\n              <$list filter=\\\"[subfilter<filter-field-of-relationship>regexp[^LINKS-IN-TEXT$]]\\\" emptyMessage={{$:/plugins/bimlas/locator/templates/list-of-context-items}}>\\r\\n                {{||$:/plugins/bimlas/locator/templates/list-of-links-in-text}}\\r\\n              </$list>\\r\\n            </ol>\\n\\n          </div>\\r\\n        </$vars>\\r\\n      </$vars>\\r\\n    </$vars>\\r\\n  </$importvariables>\\r\\n\\\\end\\r\\n\"},\"$:/plugins/bimlas/locator/macros/css-classes\":{\"title\":\"$:/plugins/bimlas/locator/macros/css-classes\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"\\\\define link-button-class(additionalClasses) tc-btn-invisible tc-tiddlylink bimlas-locator $additionalClasses$\\r\\n\\\\define menu-list-item-class() tc-menu-list-item bimlas-locator\"},\"$:/plugins/bimlas/locator/macros/filters\":{\"title\":\"$:/plugins/bimlas/locator/macros/filters\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"\\\\define filter-history() [<__baseTitle__>] [title<contextState>each:list-item[history]] -[[]]\\r\\n\\\\define filter-selected-field-values() [title<intersectionState>] [title<differenceState>] +[locator-selected-field-values<currentField>]\\r\\n\\\\define filter-field-is-list() [addprefix[$:/config/bimlas/locator/fields/]field:field-type[list]]\\r\\n\\\\define filter-unfiltered-view-context-items() [subfilter<filter-history>last[]locator-enlist-children:$(currentField)$<contextState>!has[draft.of]]\\r\\n\\\\define filter-view-context() [subfilter<filter-history>last[]locator-enlist-children:$(currentField)$<contextState>!has[draft.of]locator-fields-filter<intersectionState>!locator-fields-filter<differenceState>]\\r\\n\\\\define filter-search-context() [!is[system]locator-fields-filter:recursive[$(intersectionState)$]!locator-fields-filter:recursive[$(differenceState)$]]\\r\\n\\\\define filter-field-of-relationship() [title<contextState>get[field-of-relationship]] [<defaultFieldOfRelationship>] +[first[]]\\n\\n<!--\\r\\n I know that `filter-view-context` uses a code duplication of\\r\\n `filter-unfiltered-view-context-items`, but I have to do this way, becuse\\r\\n  $(variable)$ works only with variables defined in direct parent macro, thus\\r\\n  I cannot add another level to call chain\\r\\n-->\"},\"$:/plugins/bimlas/locator/macros/javascript-filters.js\":{\"title\":\"$:/plugins/bimlas/locator/macros/javascript-filters.js\",\"text\":\"/*\\\\\\r\\ntitle: $:/plugins/bimlas/locator/macros/javascript-filters.js\\r\\ntype: application/javascript\\r\\nmodule-type: filteroperator\\r\\n\\r\\nSpecial filters used by Locator\\r\\n\\r\\n\\\\*/\\r\\n(function() {\\r\\n\\r\\n\\t/*jslint node: true, browser: true */\\r\\n\\t/*global $tw: true */\\r\\n\\t\\\"use strict\\\";\\r\\n\\r\\n\\tfunction getFieldDefinition(options,field) {\\r\\n\\t\\tvar fieldOptionsTiddler = \\\"$:/config/bimlas/locator/fields/\\\" + field;\\r\\n\\r\\n\\t\\treturn options.wiki.getCacheForTiddler(fieldOptionsTiddler,\\\"fieldListingOperator\\\",function() {\\r\\n\\t\\t\\tvar fieldOptions = options.wiki.getTiddler(fieldOptionsTiddler) || {fields: {}};\\r\\n\\t\\t\\tvar filterOperators = options.wiki.getFilterOperators();\\r\\n\\t\\t\\tvar fieldDefinitions = {\\r\\n\\t\\t\\t\\t\\\"value\\\": {\\r\\n\\t\\t\\t\\t\\tfieldType: \\\"value\\\",\\r\\n\\t\\t\\t\\t\\tdirection: fieldOptions.fields[\\\"field-direction\\\"],\\r\\n\\t\\t\\t\\t\\tenlistChildren: {\\r\\n\\t\\t\\t\\t\\t\\t\\\"to\\\": function(title,input,prefix) {\\r\\n\\t\\t\\t\\t\\t\\t\\treturn filterOperators[\\\"field\\\"](input,{operand: title,prefix: prefix,suffix: field},options);\\r\\n\\t\\t\\t\\t\\t\\t},\\r\\n\\t\\t\\t\\t\\t\\t\\\"from\\\": function(title,unusedInput,unusedPrefix) {\\r\\n\\t\\t\\t\\t\\t\\t\\treturn (options.wiki.getTiddler(title) || {fields: {}}).fields[field] || []\\r\\n\\t\\t\\t\\t\\t\\t}\\r\\n\\t\\t\\t\\t\\t}\\r\\n\\t\\t\\t\\t},\\r\\n\\t\\t\\t\\t\\\"list\\\": {\\r\\n\\t\\t\\t\\t\\tfieldType: \\\"list\\\",\\r\\n\\t\\t\\t\\t\\tdirection: fieldOptions.fields[\\\"field-direction\\\"],\\r\\n\\t\\t\\t\\t\\tenlistChildren: {\\r\\n\\t\\t\\t\\t\\t\\t\\\"to\\\": function(title,input,prefix) {\\r\\n\\t\\t\\t\\t\\t\\t\\treturn filterOperators[\\\"contains\\\"](input,{operand: title,prefix: prefix,suffix: field},options);\\r\\n\\t\\t\\t\\t\\t\\t},\\r\\n\\t\\t\\t\\t\\t\\t\\\"from\\\": function(title,unusedInput,unusedPrefix) {\\r\\n\\t\\t\\t\\t\\t\\t\\treturn options.wiki.getTiddlerList(title,field) || [];\\r\\n\\t\\t\\t\\t\\t\\t}\\r\\n\\t\\t\\t\\t\\t}\\r\\n\\t\\t\\t\\t}\\r\\n\\t\\t\\t};\\r\\n\\t\\t\\tvar linksInTextDefinition = {\\r\\n\\t\\t\\t\\tfieldType: \\\"value\\\",\\r\\n\\t\\t\\t\\tdirection: fieldOptions.fields[\\\"field-direction\\\"],\\r\\n\\t\\t\\t\\tenlistChildren: {\\r\\n\\t\\t\\t\\t\\t\\\"to\\\": function(title,unusedInput,unusedPrefix) {\\r\\n\\t\\t\\t\\t\\t\\treturn options.wiki.getTiddlerBacklinks(title);\\r\\n\\t\\t\\t\\t\\t},\\r\\n\\t\\t\\t\\t\\t\\\"from\\\": function(title,unusedInput,unusedPrefix) {\\r\\n\\t\\t\\t\\t\\t\\treturn options.wiki.getTiddlerLinks(title);\\r\\n\\t\\t\\t\\t\\t}\\r\\n\\t\\t\\t\\t}\\r\\n\\t\\t\\t};\\r\\n\\r\\n\\t\\t\\treturn field === \\\"LINKS-IN-TEXT\\\"\\r\\n\\t\\t\\t\\t? linksInTextDefinition\\r\\n\\t\\t\\t\\t: fieldDefinitions[fieldOptions.fields[\\\"field-type\\\"] || \\\"value\\\"];\\r\\n\\t\\t});\\r\\n\\t}\\r\\n\\r\\n\\tfunction getActiveFilters(options,filterState) {\\r\\n\\t\\treturn options.wiki.getCacheForTiddler(filterState,\\\"activeFilters\\\",function() {\\r\\n\\t\\t\\tvar filteredFields = options.wiki.getTiddlerDataCached(filterState,{});\\r\\n\\t\\t\\tvar results = {};\\r\\n\\r\\n\\t\\t\\t$tw.utils.each(filteredFields,function(valuesAsString,field) {\\r\\n\\t\\t\\t\\tvar values = $tw.utils.parseStringArray(valuesAsString) || [];\\r\\n\\t\\t\\t\\tif(values.length) {\\r\\n\\t\\t\\t\\t\\tresults[field] = values;\\r\\n\\t\\t\\t\\t}\\r\\n\\t\\t\\t});\\r\\n\\r\\n\\t\\t\\treturn results;\\r\\n\\t\\t});\\r\\n\\t}\\r\\n\\r\\n\\tfunction applyFieldsFilters(source,options,filterState,filterFunc,prefix) {\\r\\n\\t\\tvar activeFilters = getActiveFilters(options,filterState);\\r\\n\\t\\tvar results = source;\\r\\n\\r\\n\\t\\tif(!Object.keys(activeFilters).length) return results;\\r\\n\\r\\n\\t\\t$tw.utils.each(activeFilters,function(values,field) {\\r\\n\\t\\t\\t$tw.utils.each(values,function(value) {\\r\\n\\t\\t\\t\\tif(value === \\\"ANY-VALUE\\\") {\\r\\n\\t\\t\\t\\t\\tvar filterOperators = options.wiki.getFilterOperators();\\r\\n\\t\\t\\t\\t\\tresults = filterOperators[\\\"has\\\"](results,{operand: field,prefix: prefix},options);\\r\\n\\t\\t\\t\\t} else {\\r\\n\\t\\t\\t\\t\\tresults = filterFunc(results,field,value,prefix);\\r\\n\\t\\t\\t\\t}\\r\\n\\t\\t\\t\\tresults = options.wiki.makeTiddlerIterator(results);\\r\\n\\t\\t\\t});\\r\\n\\t\\t});\\r\\n\\r\\n\\t\\treturn results;\\r\\n\\t}\\r\\n\\r\\n\\tfunction getDirectionOfTraverse(options,contextState,fieldOfRelationship) {\\r\\n\\t\\tvar direction = getFieldDefinition(options,fieldOfRelationship).direction;\\r\\n\\r\\n\\t\\tif(isDirectionInverted(options,contextState)) {\\r\\n\\t\\t\\tdirection = invertDirection(direction);\\r\\n\\t\\t}\\r\\n\\r\\n\\t\\treturn direction;\\r\\n\\t}\\r\\n\\r\\n\\tfunction isDirectionInverted(options,contextState) {\\r\\n\\t\\tvar contextStateTiddler = options.wiki.getTiddler(contextState) || {fields: []};\\r\\n\\t\\treturn contextStateTiddler.fields[\\\"invert-direction\\\"] === \\\"yes\\\"\\r\\n\\t}\\r\\n\\r\\n\\tfunction invertDirection(direction) {\\r\\n\\t\\treturn [\\\"from\\\",\\\"to\\\"][(direction === \\\"from\\\") + 0];\\r\\n\\t}\\r\\n\\r\\n\\tfunction enlistChildren(options,parentTitle,fieldOfRelationship,directionOfTraverse) {\\r\\n\\t\\treturn options.wiki.getGlobalCache(\\\"bimlas-locator-enlist-children-\\\" + parentTitle + \\\"-\\\" + fieldOfRelationship + \\\"-\\\" + directionOfTraverse, function() {\\r\\n\\t\\t\\tvar fieldDefinition = getFieldDefinition(options, fieldOfRelationship);\\r\\n\\t\\t\\tvar allTiddlers = options.wiki.makeTiddlerIterator(options.wiki.getTiddlers());\\r\\n\\t\\t\\treturn fieldDefinition.enlistChildren[directionOfTraverse](parentTitle,allTiddlers);\\r\\n\\t\\t});\\r\\n\\t}\\r\\n\\r\\n\\t/*\\r\\n\\tFilter titles matching to Locator fields filter\\r\\n\\r\\n\\tInput: list of tiddlers\\r\\n\\tParam: filterState\\r\\n\\tPrefix: \\\"!\\\" to exclude matching tiddlers\\r\\n\\tSuffix: \\\"recusive\\\" enables recursive filtering\\r\\n\\t*/\\r\\n\\texports[\\\"locator-fields-filter\\\"] = function(source,operator,options) {\\r\\n\\t\\tvar results = source;\\r\\n\\t\\tvar activeRecursiveFilters = getActiveFilters(options,\\\"$:/state/bimlas/locator/search/recursive-filters/\\\");\\r\\n\\r\\n\\t\\tif(operator.suffix === \\\"recursive\\\") {\\r\\n\\t\\t\\tresults = applyFieldsFilters(results,options,operator.operand,recursiveFilterFunc,operator.prefix);\\r\\n\\t\\t} else {\\r\\n\\t\\t\\tresults = applyFieldsFilters(results,options,operator.operand,directFilterFunc,operator.prefix);\\r\\n\\t\\t}\\r\\n\\r\\n\\t\\treturn results;\\r\\n\\r\\n\\t\\tfunction directFilterFunc(input,field,value,prefix) {\\r\\n\\t\\t\\tvar fieldDefinition = getFieldDefinition(options,field);\\r\\n\\t\\t\\treturn fieldDefinition.enlistChildren[\\\"to\\\"](value,input,prefix);\\r\\n\\t\\t}\\r\\n\\r\\n\\t\\tfunction recursiveFilterFunc(input,field,fieldValue,prefix) {\\r\\n\\t\\t\\tvar isRecursiveFilteringActive = $tw.utils.hop(activeRecursiveFilters,field) && (activeRecursiveFilters[field].indexOf(fieldValue) >= 0);\\r\\n\\t\\t\\tif(!isRecursiveFilteringActive) {\\r\\n\\t\\t\\t\\treturn directFilterFunc(input,field,fieldValue,prefix);\\r\\n\\t\\t\\t}\\r\\n\\r\\n\\t\\t\\tvar fieldDirection = getFieldDefinition(options,field).direction;\\r\\n\\t\\t\\tvar children = [];\\r\\n\\t\\t\\tcollectChildrenRecursively(fieldValue);\\r\\n\\t\\t\\tvar compareFunc = (prefix !== \\\"!\\\")\\r\\n\\t\\t\\t\\t? function(index) { return index >= 0 }\\r\\n\\t\\t\\t\\t: function(index) { return index < 0 };\\r\\n\\t\\t\\tvar results = [];\\r\\n\\r\\n\\t\\t\\tinput(function(tiddler,title) {\\r\\n\\t\\t\\t\\tif(compareFunc(children.indexOf(title))) {\\r\\n\\t\\t\\t\\t\\tresults = $tw.utils.pushTop(results, title);\\r\\n\\t\\t\\t\\t}\\r\\n\\t\\t\\t});\\r\\n\\r\\n\\t\\t\\treturn results;\\r\\n\\r\\n\\t\\t\\tfunction collectChildrenRecursively(parent) {\\r\\n\\t\\t\\t\\t$tw.utils.each(enlistChildren(options,parent,field,fieldDirection),function(child) {\\r\\n\\t\\t\\t\\t\\tif(children.indexOf(child) < 0) {\\r\\n\\t\\t\\t\\t\\t\\t$tw.utils.pushTop(children, child);\\r\\n\\t\\t\\t\\t\\t\\t$tw.utils.pushTop(children, collectChildrenRecursively(child));\\r\\n\\t\\t\\t\\t\\t}\\r\\n\\t\\t\\t\\t});\\r\\n\\t\\t\\t}\\r\\n\\t\\t}\\r\\n\\t};\\r\\n\\r\\n\\t/*\\r\\n\\tFilter fields that are not disabled in Locator field options\\r\\n\\r\\n\\tInput: list of fields\\r\\n\\tParam (optional): if called from toggleable fields filter (`locator-view` and `locator-search`), set to \\\"nested\\\"\\r\\n\\t*/\\r\\n\\texports[\\\"locator-enabled-fields\\\"] = function(source,operator,options) {\\r\\n\\t\\tvar typeOfFieldsFilter = operator.operand || \\\"regular\\\";\\r\\n\\t\\tvar excludedFields = options.wiki.filterTiddlers(\\\"[all[tiddlers+shadows]field:hide-in-\\\" + typeOfFieldsFilter + \\\"-fields-filter[yes]removeprefix[$:/config/bimlas/locator/fields/]]\\\") || [];\\r\\n\\t\\tvar results = [];\\r\\n\\r\\n\\t\\tsource(function(tiddler,title) {\\r\\n\\t\\t\\tif(excludedFields.indexOf(title) < 0) {\\r\\n\\t\\t\\t\\tresults.push(title);\\r\\n\\t\\t\\t}\\r\\n\\t\\t});\\r\\n\\r\\n\\t\\treturn results;\\r\\n\\t};\\r\\n\\r\\n\\t/*\\r\\n\\tList fields which can be used to build tree (\\\"tags\\\" for example)\\r\\n\\r\\n\\tInput: none\\r\\n\\tParam (optional): field to check if it's a relationship field\\r\\n\\t*/\\r\\n\\texports[\\\"locator-enlist-relationship-fields\\\"] = function(source,operator,options) {\\r\\n\\t\\tvar relationshipFields = options.wiki.getGlobalCache(\\\"bimlas-locator-enlist-relationship-fields\\\",function() {\\r\\n\\t\\t\\treturn options.wiki.filterTiddlers(\\\"[all[tiddlers+shadows]prefix[$:/config/bimlas/locator/fields/]has[field-direction]removeprefix[$:/config/bimlas/locator/fields/]]\\\");\\r\\n\\t\\t});\\r\\n\\r\\n\\t\\tif(operator.operand) {\\r\\n\\t\\t\\treturn relationshipFields.indexOf(operator.operand) >= 0\\r\\n\\t\\t\\t\\t? [operator.operand]\\r\\n\\t\\t\\t\\t: [];\\r\\n\\t\\t}\\r\\n\\r\\n\\t\\treturn relationshipFields;\\r\\n\\t};\\r\\n\\r\\n\\t/*\\r\\n\\tList field values according to Locator field settings\\r\\n\\r\\n\\tInput: list of tiddlers\\r\\n\\tParam: field\\r\\n\\t*/\\r\\n\\texports[\\\"locator-enlist-field-values\\\"] = function(source,operator,options) {\\r\\n\\t\\tvar fieldDefinition = getFieldDefinition(options,operator.operand);\\r\\n\\t\\tvar results = [];\\r\\n\\r\\n\\t\\tsource(function(tiddler,title) {\\r\\n\\t\\t\\tif(!tiddler) return;\\r\\n\\r\\n\\t\\t\\tvar value = fieldDefinition.enlistChildren[\\\"from\\\"](title);\\r\\n\\r\\n\\t\\t\\tif(!value) return;\\r\\n\\r\\n\\t\\t\\tresults = $tw.utils.pushTop(results,value);\\r\\n\\t\\t});\\r\\n\\r\\n\\t\\treturn results;\\r\\n\\t};\\r\\n\\r\\n\\t/*\\r\\n\\tList of active field filters\\r\\n\\r\\n\\tInput: filterState\\r\\n\\tParam (optional): field\\r\\n\\t*/\\r\\n\\texports[\\\"locator-selected-field-values\\\"] = function(source,operator,options) {\\r\\n\\t\\tvar activeFilters = {};\\r\\n\\r\\n\\t\\tsource(function(tiddler,title) {\\r\\n\\t\\t\\t$tw.utils.each(getActiveFilters(options,title),function(value,key) {\\r\\n\\t\\t\\t\\tactiveFilters[key] = $tw.utils.pushTop(activeFilters[key] || [],value);\\r\\n\\t\\t\\t});\\r\\n\\t\\t});\\r\\n\\r\\n\\t\\tif(!Object.keys(activeFilters).length) return [];\\r\\n\\r\\n\\t\\treturn operator.operand\\r\\n\\t\\t\\t? activeFilters[operator.operand] || []\\r\\n\\t\\t\\t: [\\\"TODO: Join active filter values (array of arrays)\\\"];\\r\\n\\t};\\r\\n\\r\\n\\t/*\\r\\n\\tList of active field names\\r\\n\\r\\n\\tInput: filterState\\r\\n\\tParam (optional): none\\r\\n\\t*/\\r\\n\\texports[\\\"locator-selected-field-names\\\"] = function(source,operator,options) {\\r\\n\\t\\tvar fieldNames = [];\\r\\n\\r\\n\\t\\tsource(function(tiddler,title) {\\r\\n\\t\\t\\tfieldNames = $tw.utils.pushTop(fieldNames,Object.keys(getActiveFilters(options,title)));\\r\\n\\t\\t});\\r\\n\\r\\n\\t\\treturn fieldNames;\\r\\n\\t};\\r\\n\\r\\n\\t/*\\r\\n\\tList children of input elements based on selected relationship field\\r\\n\\r\\n\\tInput: parent tiddlers\\r\\n\\tParam (optional): contextState\\r\\n\\tSuffix: field of relationship\\r\\n\\t*/\\r\\n\\texports[\\\"locator-enlist-children\\\"] = function(source,operator,options) {\\r\\n\\t\\tvar fieldOfRelationship = operator.suffix;\\r\\n\\t\\tvar directionOfTraverse = getDirectionOfTraverse(options,operator.operand,fieldOfRelationship);\\r\\n\\t\\tvar results = [];\\r\\n\\r\\n\\t\\tsource(function(tiddler,title) {\\r\\n\\t\\t\\tresults = $tw.utils.pushTop(results, enlistChildren(options,title,fieldOfRelationship,directionOfTraverse));\\r\\n\\t\\t\\tresults = options.wiki.sortByList(results,title);\\r\\n\\t\\t});\\r\\n\\r\\n\\t\\treturn results;\\r\\n\\t};\\r\\n\\r\\n\\t/*\\r\\n\\tGet direction of traverse: field direction + optional invert direction\\r\\n\\r\\n\\tInput: contextState\\r\\n\\tParam: field of relationship\\r\\n\\t*/\\r\\n\\texports[\\\"locator-direction-of-traverse\\\"] = function(source,operator,options) {\\r\\n\\t\\tvar results = [];\\r\\n\\r\\n\\t\\tsource(function(tiddler,title) {\\r\\n\\t\\t\\tresults = [getDirectionOfTraverse(options,title,operator.operand)];\\r\\n\\t\\t});\\r\\n\\r\\n\\t\\treturn results;\\r\\n\\t};\\r\\n\\r\\n})();\\r\\n\",\"type\":\"application/javascript\",\"module-type\":\"filteroperator\"},\"$:/plugins/bimlas/locator/macros/template-macros\":{\"title\":\"$:/plugins/bimlas/locator/macros/template-macros\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"\\\\define droppable-menu-list-item(content actions)\\r\\n  <$droppable actions=<<__actions__>>>\\r\\n    <div class=\\\"tc-droppable-placeholder\\\" style=\\\"display: block\\\">\\r\\n      <<__content__>>\\r\\n    </div>\\r\\n  </$droppable>\\r\\n\\\\end\"},\"$:/config/bimlas/locator/fields/LINKS-IN-TEXT\":{\"title\":\"$:/config/bimlas/locator/fields/LINKS-IN-TEXT\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"field-direction\":\"from\",\"text\":\"$:/plugins/bimlas/locator/field-templates/link\"},\"$:/config/bimlas/locator/fields/bag\":{\"title\":\"$:/config/bimlas/locator/fields/bag\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"hide-in-nested-fields-filter\":\"yes\",\"hide-in-regular-fields-filter\":\"yes\"},\"$:/config/bimlas/locator/fields/caption\":{\"title\":\"$:/config/bimlas/locator/fields/caption\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"hide-in-nested-fields-filter\":\"yes\"},\"$:/config/bimlas/locator/fields/color\":{\"title\":\"$:/config/bimlas/locator/fields/color\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"$:/plugins/bimlas/locator/field-templates/color\"},\"$:/config/bimlas/locator/fields/created\":{\"title\":\"$:/config/bimlas/locator/fields/created\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"hide-in-nested-fields-filter\":\"yes\",\"hide-in-regular-fields-filter\":\"yes\"},\"$:/config/bimlas/locator/fields/draft.of\":{\"title\":\"$:/config/bimlas/locator/fields/draft.of\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"hide-in-nested-fields-filter\":\"yes\",\"hide-in-regular-fields-filter\":\"yes\"},\"$:/config/bimlas/locator/fields/draft.title\":{\"title\":\"$:/config/bimlas/locator/fields/draft.title\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"hide-in-nested-fields-filter\":\"yes\",\"hide-in-regular-fields-filter\":\"yes\"},\"$:/config/bimlas/locator/fields/icon\":{\"title\":\"$:/config/bimlas/locator/fields/icon\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"$:/plugins/bimlas/locator/field-templates/icon\"},\"$:/config/bimlas/locator/fields/list-after\":{\"title\":\"$:/config/bimlas/locator/fields/list-after\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"hide-in-nested-fields-filter\":\"yes\",\"hide-in-regular-fields-filter\":\"yes\",\"text\":\"$:/plugins/bimlas/locator/field-templates/link\"},\"$:/config/bimlas/locator/fields/list-before\":{\"title\":\"$:/config/bimlas/locator/fields/list-before\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"hide-in-nested-fields-filter\":\"yes\",\"hide-in-regular-fields-filter\":\"yes\",\"text\":\"$:/plugins/bimlas/locator/field-templates/link\"},\"$:/config/bimlas/locator/fields/list\":{\"title\":\"$:/config/bimlas/locator/fields/list\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"field-type\":\"list\",\"hide-in-nested-fields-filter\":\"yes\",\"hide-in-regular-fields-filter\":\"yes\",\"text\":\"$:/plugins/bimlas/locator/field-templates/link\"},\"$:/config/bimlas/locator/fields/modified\":{\"title\":\"$:/config/bimlas/locator/fields/modified\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"hide-in-nested-fields-filter\":\"yes\",\"hide-in-regular-fields-filter\":\"yes\"},\"$:/config/bimlas/locator/fields/revision\":{\"title\":\"$:/config/bimlas/locator/fields/revision\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"hide-in-nested-fields-filter\":\"yes\",\"hide-in-regular-fields-filter\":\"yes\"},\"$:/config/bimlas/locator/fields/tags\":{\"title\":\"$:/config/bimlas/locator/fields/tags\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"field-type\":\"list\",\"field-direction\":\"to\",\"text\":\"$:/plugins/bimlas/locator/field-templates/tag\"},\"$:/config/bimlas/locator/fields/text\":{\"title\":\"$:/config/bimlas/locator/fields/text\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"hide-in-nested-fields-filter\":\"yes\",\"hide-in-regular-fields-filter\":\"yes\"},\"$:/config/bimlas/locator/fields/title\":{\"title\":\"$:/config/bimlas/locator/fields/title\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"hide-in-nested-fields-filter\":\"yes\",\"hide-in-regular-fields-filter\":\"yes\",\"text\":\"$:/plugins/bimlas/locator/field-templates/link\"},\"$:/config/bimlas/locator/fields/type\":{\"title\":\"$:/config/bimlas/locator/fields/type\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"hide-in-nested-fields-filter\":\"yes\"},\"$:/plugins/bimlas/locator/settings/settings\":{\"title\":\"$:/plugins/bimlas/locator/settings/settings\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"\\\\define show-in-fields()\\r\\n  <$select field=\\\"hide-in-nested-fields-filter\\\" default=\\\"\\\">\\r\\n    <option value=\\\"\\\">Show</option>\\r\\n    <option value=\\\"yes\\\">Hide</option>\\r\\n  </$select> in nested filter (`locator-view`, `locator-search`)<br/>\\r\\n  <$select field=\\\"hide-in-regular-fields-filter\\\" default=\\\"\\\">\\r\\n    <option value=\\\"\\\">Show</option>\\r\\n    <option value=\\\"yes\\\">Hide</option>\\r\\n  </$select> in regular filter (`locator-fields` and tiddler info)\\r\\n\\\\end\\n\\n\\\\define field-type()\\r\\n  <$select field=\\\"field-type\\\" default=\\\"\\\">\\r\\n    <option value=\\\"\\\">Value</option>\\r\\n    <option value=\\\"list\\\">List</option>\\r\\n  </$select>\\r\\n\\\\end\\n\\n\\\\define field-direction()\\r\\n  <$select field=\\\"field-direction\\\" default=\\\"\\\">\\r\\n    <option value=\\\"\\\">No</option>\\r\\n    <option value=\\\"to\\\">Yes</option>\\r\\n    <!--\\r\\n    I blocked it because a tree with children on top is difficult to handle:\\n\\n    For example, there is a tiddler named \\\"Father\\\" which has \\\"Kid\\\" in the \\\"children\\\" field\\n\\n    If you want to filter tiddlers by field values (for example, in the fields filter),\\r\\n    \\\"Father\\\" will be listed among those tiddlers that have \\\"Kid\\\" in the \\\"children\\\" field.\\r\\n    In fact, we wanted to children of \\\"Kid\\\".\\n\\n    Filtering \\\"Kid\\\" in the \\\"Fields\\\" search tab will list the tiddlers that have \\\"Kid\\\" in\\r\\n    their \\\"children\\\" field (for example, \\\"Father\\\"). If you turn on recursive filtering,\\r\\n    it will list all tiddlers starting with \\\"Kid\\\" (so \\\"Father\\\" will not be listed).\\n\\n    The \\\"Create tiddler in context\\\" button also has to be aware of the direction of the\\r\\n    field, which also complicates the code.\\n\\n    If you do make this option available, remember to tell the user that when renaming a\\r\\n    tiddler, he must rewrite the field values that refer to the current tiddler. If you\\r\\n    want to rewrite it automatically, make sure it works properly with the Relink plugin\\r\\n    (does not adding the new name more than once to the field).\\r\\n    -->\\r\\n    <!-- <option value=\\\"from\\\">From</option> -->\\r\\n  </$select>\\r\\n\\\\end\\n\\n\\\\define template()\\r\\n  <$select field=\\\"text\\\" default=\\\"$:/plugins/bimlas/locator/field-templates/text\\\">\\r\\n    <$list filter=\\\"[all[tiddlers+shadows]tag[$:/tags/bimlas/locator/field-templates]]\\\">\\r\\n      <option value=<<currentTiddler>>><$transclude field=\\\"caption\\\"><$view field=\\\"title\\\"/></$transclude></option>\\r\\n    </$list>\\r\\n  </$select>\\r\\n  <$transclude/>\\r\\n\\\\end\\n\\n\\\\define settings(field)\\r\\n  <$importvariables filter=\\\"[all[tiddlers+shadows]prefix[$:/plugins/bimlas/locator/macros/]]\\\">\\n\\n  <h3><$link to=\\\"$:/config/bimlas/locator/fields/$field$\\\"><$text text=<<__field__>>/></$link></h3>\\n\\n    <div class=\\\"tc-control-panel\\\">\\r\\n      <table>\\r\\n        <tbody>\\r\\n          <tr>\\r\\n            <td>Description</td>\\r\\n            <td>//{{$:/language/Docs/Fields/$field$}}//</td>\\r\\n          </tr>\\r\\n          <tr>\\r\\n            <td>Show in fields filter</td>\\r\\n            <td>\\r\\n              <<show-in-fields>>\\r\\n            </td>\\r\\n          </tr>\\r\\n          <tr>\\r\\n            <td>Field type</td>\\r\\n            <td>\\r\\n              <<field-type>>\\r\\n              <p>//Does the field contain a single value (for example `Franz Kafka`) or a list of values (`[[Franz Kafka]] [[Dostojevskij]]`)?//</p>\\r\\n            </td>\\r\\n          </tr>\\r\\n          <tr>\\r\\n            <td>Does the field represent a tree?</td>\\r\\n            <td>\\r\\n              <<field-direction>>\\r\\n              <p>//If the field contains the title(s) of other tiddler(s) (like \\\"tags\\\"), set it to \\\"Yes\\\".//</p>\\r\\n            </td>\\r\\n          </tr>\\r\\n          <tr>\\r\\n            <td>Template</td>\\r\\n            <td>\\r\\n              <<template>>\\r\\n              <p>//The template to display in the field filter.//</p>\\r\\n              <p>//You can create your own field template tiddlers by adding the// <<tag \\\"$:/tags/bimlas/locator/field-templates\\\">> //tag to them (click on this tag pill for examples).//</p>\\r\\n            </td>\\r\\n          </tr>\\r\\n        </tbody>\\r\\n      </table>\\r\\n    </div>\\n\\n  </$importvariables>\\r\\n\\\\end\\n\\n\\\\define option()\\r\\n  <option value=<<currentTiddler>>>\\r\\n    <$view field=\\\"title\\\"/>\\r\\n    <$list filter=\\\"[subfilter<settingsTiddler>is[tiddler]] [subfilter<settingsTiddler>is[shadow]] +[first[]]\\\">~</$list>\\r\\n    <$list filter=\\\"[subfilter<settingsTiddler>is[tiddler]]\\\">*</$list>\\r\\n  </option>\\r\\n\\\\end\\n\\n\\\\define settingsTiddler() [title<currentTiddler>addprefix[$:/config/bimlas/locator/fields/]]\\n\\nSelect field to edit its settings:\\r\\n<$select tiddler=\\\"$:/temp/bimlas/locator/settings-of-field\\\">\\r\\n  <optgroup label=\\\"Fields of regular tiddlers\\\">\\r\\n    <$list filter=\\\"[!is[system]fields[]sort[]]\\\">\\r\\n      <<option>>\\r\\n    </$list>\\r\\n  </optgroup>\\r\\n  <optgroup label=\\\"Fields of system tiddlers\\\">\\r\\n    <$list filter=\\\"[all[tiddlers+shadows]is[system]fields[]] -[!is[system]fields[]] +[sort[]]\\\">\\r\\n      <<option>>\\r\\n    </$list>\\r\\n  </optgroup>\\r\\n</$select>\\n\\n* //`~`: Has custom settings//\\r\\n* //`*`: Settings modified by user//\\n\\nTo set up a new field, first add it to at least one tiddler.\\n\\n<p>//You can create your own context item template tiddlers by adding the// <<tag \\\"$:/tags/bimlas/locator/context-item-templates\\\">> //tag to them (click on this tag pill for examples).//</p>\\n\\n<$list filter=\\\"[title{$:/temp/bimlas/locator/settings-of-field}] -[[]]\\\">\\r\\n  <$list filter=<<settingsTiddler>>>\\r\\n    <$macrocall $name=\\\"settings\\\" field={{$:/temp/bimlas/locator/settings-of-field}}/>\\r\\n  </$list>\\r\\n</$list>\"},\"$:/plugins/bimlas/locator/stylesheet\":{\"title\":\"$:/plugins/bimlas/locator/stylesheet\",\"tags\":\"$:/tags/Stylesheet\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\".tc-tiddler-frame.bimlas-locator-explanation {\\r\\n  max-width: 400px;\\r\\n}\\r\\n.bimlas-locator-explanation svg {\\r\\n  width: 1rem;\\r\\n  height: 1rem;\\r\\n}\\r\\n.tc-drop-down button.bimlas-locator {\\r\\n  width: auto;\\r\\n  padding: 0;\\r\\n  display: inline-block;\\r\\n  background-color: inherit;\\r\\n}\\r\\nol.bimlas-locator {\\r\\n  list-style-type: none;\\r\\n  margin: 0;\\r\\n  padding-left: 0;\\r\\n}\\r\\nol.bimlas-locator ol {\\r\\n  margin-left: 0.75em;\\r\\n  padding-left: 0.3em;\\r\\n  border-left: 1px dashed;\\r\\n}\\r\\nli.toc-item.bimlas-locator, .tc-menu-list-item.bimlas-locator {\\r\\n  margin-top: 3px;\\r\\n  margin-bottom: 0;\\r\\n}\\r\\n.tc-menu-list-item.bimlas-locator > .tc-droppable {\\r\\n  display: inline-block;\\r\\n}\\r\\n.tc-block-dropdown.tc-search-drop-down .bimlas-locator a {\\r\\n  padding: 0;\\r\\n}\\r\\n.tc-block-dropdown.tc-search-drop-down .bimlas-locator a:hover {\\r\\n  background-color: initial;\\r\\n}\\r\\nbutton.bimlas-locator svg {\\r\\n  margin: 0 0.25em;\\r\\n}\\r\\nbutton.bimlas-locator.active svg {\\r\\n  fill: <<colour dirty-indicator>>;\\r\\n}\\r\\n.bimlas-locator.right {\\r\\n  float: right;\\r\\n  margin-right: 1em;\\r\\n}\\r\\n.bimlas-locator.context-settings {\\r\\n  border-width: 1px;\\r\\n  border-style: dashed;\\r\\n  padding: 0.5em;\\r\\n}\"},\"$:/plugins/bimlas/locator/templates/context-item\":{\"title\":\"$:/plugins/bimlas/locator/templates/context-item\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"<li class=\\\"toc-item\\\">\\r\\n  {{||$:/plugins/bimlas/locator/buttons/go-down-to-context}}\\r\\n  <$list filter=\\\"[title<contextState>get[template-of-context-items]] [title<__templateOfContextItems__>] -[[]] +[first[]]\\\" variable=\\\"template\\\">\\r\\n    <$transclude tiddler=<<template>>/>\\r\\n  </$list>\\r\\n</li>\"},\"$:/plugins/bimlas/locator/templates/context-settings\":{\"title\":\"$:/plugins/bimlas/locator/templates/context-settings\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"\\\\define field-of-relationship()\\r\\n  Tree is based on field:<br/>\\r\\n  <$select tiddler=<<contextState>> field=\\\"field-of-relationship\\\" default=<<defaultFieldOfRelationship>>>\\r\\n    <$list filter=\\\"[locator-enlist-relationship-fields[]]\\\" variable=\\\"currentField\\\">\\r\\n      <option value=<<currentField>>>\\r\\n        <$list filter=\\\"[subfilter<filter-unfiltered-view-context-items>count[]]\\\" variable=\\\"count\\\">\\r\\n          (<<count>>) <<currentField>>\\r\\n        </$list>\\r\\n      </option>\\r\\n    </$list>\\r\\n  </$select>\\r\\n\\\\end\\n\\n\\\\define template-of-context-items()\\r\\n  Template of context items:<br/>\\r\\n  <$select tiddler=<<contextState>> field=\\\"template-of-context-items\\\" default=<<__templateOfContextItems__>>>\\r\\n    <$list filter=\\\"[all[tiddlers+shadows]tag[$:/tags/bimlas/locator/context-item-templates]]\\\">\\r\\n      <option value=<<currentTiddler>>>\\r\\n        <$transclude field=\\\"caption\\\"><$view field=\\\"title\\\"/></$transclude>\\r\\n      </option>\\r\\n    </$list>\\r\\n  </$select>\\r\\n\\\\end\\n\\n<$list filter=\\\"[title<contextState>field:context-settings-opened[yes]]\\\">\\r\\n  <div class=\\\"bimlas-locator context-settings\\\">\\r\\n    <<field-of-relationship>><br/>\\r\\n    <<template-of-context-items>><br/>\\r\\n    <$checkbox\\r\\n      tiddler=<<contextState>>\\r\\n      field=\\\"invert-direction\\\"\\r\\n      checked=\\\"yes\\\"\\r\\n      unchecked=\\\"no\\\"\\r\\n      default=\\\"no\\\"\\r\\n    >\\r\\n      Invert direction\\r\\n    </$checkbox><br/>\\r\\n    <$checkbox\\r\\n      tiddler=<<contextState>>\\r\\n      field=\\\"allow-to-open-leaves\\\"\\r\\n      checked=\\\"yes\\\"\\r\\n      unchecked=\\\"no\\\"\\r\\n      default=\\\"no\\\"\\r\\n    >\\r\\n      Allow to open leaves\\r\\n    </$checkbox><br/>\\r\\n    {{$:/plugins/bimlas/locator/buttons/open-field-settings}}\\r\\n  </div>\\r\\n</$list>\\r\\n\"},\"$:/plugins/bimlas/locator/templates/field-names\":{\"title\":\"$:/plugins/bimlas/locator/templates/field-names\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"\\\\define close-actions()\\r\\n  <$action-listops $tiddler=<<contextState>> $field=\\\"opened-fields-filters\\\" $subfilter=\\\"-[<currentField>]\\\"/>\\r\\n\\\\end\\n\\n\\\\define open-actions()\\r\\n  <$action-listops $tiddler=<<contextState>> $field=\\\"opened-fields-filters\\\" $subfilter=\\\"[<currentField>]\\\"/>\\r\\n\\\\end\\n\\n\\\\define closed()\\r\\n  <$button class=<<fieldButtonClass>> actions=<<open-actions>>>\\r\\n    {{$:/core/images/down-arrow}} <<currentField>>\\r\\n  </$button>\\r\\n  {{$:/plugins/bimlas/locator/buttons/remove-filters-of-current-field}}\\r\\n\\\\end\\n\\n\\\\define opened()\\r\\n  <$button class=<<fieldButtonClass>> actions=<<close-actions>>>\\r\\n    {{$:/core/images/up-arrow}} <<currentField>>\\r\\n  </$button>\\r\\n  {{$:/plugins/bimlas/locator/buttons/remove-filters-of-current-field}}\\r\\n  {{$:/plugins/bimlas/locator/templates/field-values}}\\r\\n\\\\end\\n\\n\\\\define field-names() [title<intersectionState>] [title<differenceState>] +[locator-selected-field-names[]] [subfilter<filterContextItems>fields[]locator-enabled-fields<typeOfFieldsFilter>] +[sort[]]\\r\\n\\\\define has-field-value-to-list() [subfilter<filterContextItems>has<currentField>search:$(currentField)$<searchedFieldValue>] [subfilter<filter-selected-field-values>] +[first[]]\\n\\n<ol class=\\\"bimlas-locator\\\">\\r\\n  <$list filter=<<field-names>> variable=\\\"currentField\\\">\\r\\n    <$list filter=<<has-field-value-to-list>> variable=\\\"null\\\">\\r\\n      <$set name=\\\"recursiveFilteringOfCurrentFieldAvailable\\\" filter=\\\"[<recursiveFilteringAvailable>regexp[yes]] [locator-enlist-relationship-fields<currentField>] +[count[]regexp[2]]\\\" value=\\\"yes\\\" emptyValue=\\\"no\\\">\\r\\n        <$set name=\\\"fieldButtonClass\\\" filter=\\\"[subfilter<filter-selected-field-values>first[]]\\\" value=<<link-button-class additionalClasses:\\\"active\\\">> emptyValue=<<link-button-class>>>\\r\\n          <li class=<<menu-list-item-class>>>\\r\\n            <$list filter=\\\"[title<contextState>contains:opened-fields-filters<currentField>]\\\" emptyMessage=<<closed>>><<opened>></$list>\\r\\n          </li>\\r\\n        </$set>\\r\\n      </$set>\\r\\n    </$list>\\r\\n  </$list>\\r\\n</ol>\"},\"$:/plugins/bimlas/locator/templates/field-value-template\":{\"title\":\"$:/plugins/bimlas/locator/templates/field-value-template\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"<$list filter=\\\"[[$:/config/bimlas/locator/fields/]addsuffix<currentField>get[text]]\\\" emptyMessage={{$:/plugins/bimlas/locator/field-templates/text}} variable=\\\"template\\\">\\r\\n  <$transclude tiddler=<<template>>/>\\r\\n</$list>\"},\"$:/plugins/bimlas/locator/templates/field-values\":{\"title\":\"$:/plugins/bimlas/locator/templates/field-values\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"\\\\define remove-filtering-of-current-field()\\r\\n  <$action-setfield $tiddler=<<intersectionState>> $index=<<currentField>> $value=\\\"\\\"/>\\r\\n  <$action-setfield $tiddler=<<differenceState>> $index=<<currentField>> $value=\\\"\\\"/>\\r\\n  <$list filter=\\\"[<recursiveFilteringOfCurrentFieldAvailable>regexp[yes]]\\\" variable=\\\"null\\\">\\r\\n    <$action-setfield $tiddler=\\\"$:/state/bimlas/locator/search/recursive-filters/\\\" $index=<<currentField>> $value=\\\"\\\"/>\\r\\n  </$list>\\r\\n\\\\end\\n\\n\\\\define remove-from-intersection-state()\\r\\n  <$action-listops $tiddler=<<intersectionState>> $index=<<currentField>> $subfilter=\\\"-[all[current]]\\\"/>\\r\\n\\\\end\\n\\n\\\\define remove-from-difference-state()\\r\\n  <$action-listops $tiddler=<<differenceState>> $index=<<currentField>> $subfilter=\\\"-[all[current]]\\\"/>\\r\\n\\\\end\\n\\n\\\\define activate-actions()\\r\\n  <<__beforeActivateActions__>>\\r\\n  <$action-listops $tiddler=<<__filterState__>> $index=<<currentField>> $subfilter=\\\"[all[current]]\\\"/>\\r\\n\\\\end\\n\\n\\\\define inactivate-actions()\\r\\n  <$action-listops $tiddler=<<__filterState__>> $index=<<currentField>> $subfilter=\\\"-[all[current]]\\\"/>\\r\\n  <$list filter=\\\"[<recursiveFilteringOfCurrentFieldAvailable>regexp[yes]]\\\" variable=\\\"null\\\">\\r\\n    <$action-listops $tiddler=\\\"$:/state/bimlas/locator/search/recursive-filters/\\\" $index=<<currentField>> $subfilter=\\\"-[all[current]]\\\"/>\\r\\n  </$list>\\r\\n\\\\end\\n\\n\\\\define button-inactive()\\r\\n  <$button tooltip=<<__tooltip__>> class=<<link-button-class>> actions=<<activate-actions>>>\\r\\n    <<__icon__>>\\r\\n  </$button>\\r\\n\\\\end\\n\\n\\\\define button-active()\\r\\n  <$button tooltip=<<__tooltip__>> class=<<link-button-class additionalClasses:\\\"active\\\">> actions=<<inactivate-actions>>>\\r\\n    <<__icon__>>\\r\\n  </$button>\\r\\n\\\\end\\n\\n\\\\define toggle-button(filterState icon beforeActivateActions tooltip)\\r\\n  <$list filter=\\\"[title<__filterState__>locator-selected-field-values<currentField>is[current]]\\\" emptyMessage=<<button-inactive>>>\\r\\n    <<button-active>>\\r\\n  </$list>\\r\\n\\\\end\\n\\n\\\\define field-values-of-context-items() [subfilter<filterContextItems>locator-enlist-field-values<currentField>search:title<searchedFieldValue>] [subfilter<filter-selected-field-values>] +[sort[]]\\n\\n<ol class=\\\"bimlas-locator\\\">\\r\\n  <li class=<<menu-list-item-class>>>\\r\\n    <$tiddler tiddler=\\\"ANY-VALUE\\\">\\r\\n      <$macrocall\\r\\n        $name=\\\"toggle-button\\\"\\r\\n        filterState=<<intersectionState>>\\r\\n        icon={{$:/core/images/new-button}}\\r\\n        beforeActivateActions=<<remove-filtering-of-current-field>>\\r\\n        tooltip=\\\"Toggle filtering to any value\\\"\\r\\n      />\\r\\n      <$macrocall\\r\\n        $name=\\\"toggle-button\\\"\\r\\n        filterState=<<differenceState>>\\r\\n        icon={{$:/core/images/close-button}}\\r\\n        beforeActivateActions=<<remove-filtering-of-current-field>>\\r\\n        tooltip=\\\"Toggle filtering to any value\\\"\\r\\n      />\\r\\n      __Any value__\\r\\n    </$tiddler>\\r\\n  </li>\\r\\n  <$list filter=\\\"[subfilter<field-values-of-context-items>regexp[^ANY-VALUE$]count[]] -[[1]]\\\" variable=\\\"null\\\">\\r\\n    <$list filter=<<field-values-of-context-items>>>\\r\\n      <li class=<<menu-list-item-class>>>\\r\\n        <$macrocall\\r\\n          $name=\\\"toggle-button\\\"\\r\\n          filterState=<<intersectionState>>\\r\\n          icon={{$:/core/images/new-button}}\\r\\n          beforeActivateActions=<<remove-from-difference-state>>\\r\\n          tooltip=\\\"Toggle filtering to this value\\\"\\r\\n        />\\r\\n        <$macrocall\\r\\n          $name=\\\"toggle-button\\\"\\r\\n          filterState=<<differenceState>>\\r\\n          icon={{$:/core/images/close-button}}\\r\\n          beforeActivateActions=<<remove-from-intersection-state>>\\r\\n          tooltip=\\\"Toggle filtering to this value\\\"\\r\\n        />\\r\\n        <$list filter=\\\"[<recursiveFilteringOfCurrentFieldAvailable>regexp[yes]]\\\" variable=\\\"null\\\">\\r\\n          <$macrocall\\r\\n            $name=\\\"toggle-button\\\"\\r\\n            filterState=\\\"$:/state/bimlas/locator/search/recursive-filters/\\\"\\r\\n            icon={{$:/core/images/link}}\\r\\n            tooltip=\\\"Toggle recursive filtering to this value\\\"\\r\\n          />\\r\\n        </$list>\\r\\n        <$macrocall\\r\\n          $name=\\\"droppable-menu-list-item\\\"\\r\\n          content={{$:/plugins/bimlas/locator/templates/field-value-template}}\\r\\n          actions={{$:/plugins/bimlas/locator/actions/add-field-value}}\\r\\n        />\\r\\n      </li>\\r\\n    </$list>\\r\\n  </$list>\\r\\n</ol>\\r\\n\"},\"$:/plugins/bimlas/locator/templates/fields-filter\":{\"title\":\"$:/plugins/bimlas/locator/templates/fields-filter\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"\\\\define open-actions()\\r\\n  <$action-listops $tiddler=<<contextState>> $field=\\\"opened-fields-filters\\\" $subfilter=\\\"[[FIELDS-FILTER]]\\\"/>\\r\\n\\\\end\\n\\n\\\\define close-actions()\\r\\n  <$action-listops $tiddler=<<contextState>> $field=\\\"opened-fields-filters\\\" $subfilter=\\\"-[[FIELDS-FILTER]]\\\"/>\\r\\n\\\\end\\n\\n\\\\define opened()\\r\\n  <$button class=<<fieldsFilterButtonClass>> actions=<<close-actions>>>\\r\\n    {{$:/core/images/up-arrow}} __Filter by fields__\\r\\n  </$button>\\r\\n  {{$:/plugins/bimlas/locator/buttons/remove-filters}}\\r\\n  <ol class=\\\"bimlas-locator\\\">\\r\\n    {{$:/plugins/bimlas/locator/templates/field-names}}\\r\\n  </ol>\\r\\n\\\\end\\n\\n\\\\define closed()\\r\\n  <$button class=<<fieldsFilterButtonClass>> actions=<<open-actions>>>\\r\\n    {{$:/core/images/down-arrow}} __Filter by fields__\\r\\n  </$button>\\r\\n  {{$:/plugins/bimlas/locator/buttons/remove-filters}}\\r\\n\\\\end\\n\\n<$set name=\\\"fieldsFilterButtonClass\\\" filter=\\\"[subfilter<filter-selected-field-values>first[]]\\\" value=<<link-button-class additionalClasses:\\\"active\\\">> emptyValue=<<link-button-class>>>\\r\\n  <$vars typeOfFieldsFilter=\\\"nested\\\">\\r\\n    <$list filter=\\\"[title<contextState>contains:opened-fields-filters[FIELDS-FILTER]]\\\" emptyMessage=<<closed>>><<opened>></$list>\\r\\n  </$vars>\\r\\n</$set>\"},\"$:/plugins/bimlas/locator/templates/history-item\":{\"title\":\"$:/plugins/bimlas/locator/templates/history-item\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"{{||$:/plugins/bimlas/locator/buttons/go-up-to-context}}\\r\\n{{||$:/plugins/bimlas/locator/field-templates/link}}\"},\"$:/plugins/bimlas/locator/templates/history\":{\"title\":\"$:/plugins/bimlas/locator/templates/history\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"<$list filter=<<filter-history>>>\\r\\n  <$macrocall $name=\\\"droppable-menu-list-item\\\" content={{$:/plugins/bimlas/locator/templates/history-item}} actions={{$:/plugins/bimlas/locator/actions/move-to-another-context}}/>\\r\\n</$list>\\r\\n\"},\"$:/plugins/bimlas/locator/templates/list-of-context-items\":{\"title\":\"$:/plugins/bimlas/locator/templates/list-of-context-items\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"<$list filter=<<filterContextItems>>>\\r\\n  <$macrocall\\r\\n    $name=\\\"droppable-menu-list-item\\\"\\r\\n    content={{$:/plugins/bimlas/locator/templates/context-item}}\\r\\n    actions={{$:/plugins/bimlas/locator/actions/move-to-another-context}}\\r\\n  />\\r\\n</$list>\"},\"$:/plugins/bimlas/locator/templates/list-of-links-in-text\":{\"title\":\"$:/plugins/bimlas/locator/templates/list-of-links-in-text\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"<$list filter=\\\"[subfilter<filterContextItems>sort[]]\\\">\\r\\n  {{||$:/plugins/bimlas/locator/templates/context-item}}\\r\\n</$list>\"},\"$:/plugins/bimlas/locator/templates/search-toolbar\":{\"title\":\"$:/plugins/bimlas/locator/templates/search-toolbar\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"<$vars\\r\\n  titleOfNewTiddler={{$:/temp/search}}\\r\\n>\\r\\n  {{$:/plugins/bimlas/locator/buttons/clear-search-input}}\\r\\n  {{$:/plugins/bimlas/locator/buttons/copy-filter-to-advanced-search}}\\r\\n  {{$:/plugins/bimlas/locator/buttons/create-new-tiddler}}\\r\\n  {{$:/plugins/bimlas/locator/buttons/open-field-settings}}\\r\\n</$vars>\\r\\n\"},\"$:/plugins/bimlas/locator/templates/view-toolbar\":{\"title\":\"$:/plugins/bimlas/locator/templates/view-toolbar\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"<$list filter=\\\"[title<contextState>!field:invert-direction[yes]]\\\" variable=\\\"null\\\">\\r\\n  <$list filter=\\\"[subfilter<filter-field-of-relationship>!regexp[^LINKS-IN-TEXT$]]\\\">\\r\\n    {{||$:/plugins/bimlas/locator/buttons/create-new-tiddler}}\\r\\n  </$list>\\r\\n  {{$:/plugins/bimlas/locator/buttons/search-in-context}}\\r\\n</$list>\\r\\n{{$:/plugins/bimlas/locator/buttons/collapse-history}}\\r\\n{{$:/plugins/bimlas/locator/buttons/toggle-context-settings}}\"},\"$:/plugins/bimlas/locator/viewtemplate/field-list\":{\"title\":\"$:/plugins/bimlas/locator/viewtemplate/field-list\",\"tags\":\"\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"<table class=\\\"tc-view-field-table\\\">\\r\\n  <tbody>\\r\\n    <$list filter=\\\"[all[current]fields[]locator-enabled-fields[]sort[title]] -text\\\" variable=\\\"currentField\\\">\\r\\n      <tr class=\\\"tc-view-field\\\">\\r\\n        <td class=\\\"tc-view-field-name\\\">\\r\\n          <$text text=<<currentField>>/>\\r\\n        </td>\\r\\n        <td class=\\\"tc-view-field-value\\\">\\r\\n          <$list filter=\\\"[all[current]locator-enlist-field-values<currentField>]\\\">\\r\\n            {{||$:/plugins/bimlas/locator/templates/field-value-template}}\\r\\n          </$list>\\r\\n        </td>\\r\\n      </tr>\\r\\n    </$list>\\r\\n  </tbody>\\r\\n</table>\"},\"$:/plugins/bimlas/locator/viewtemplate/fields-info\":{\"title\":\"$:/plugins/bimlas/locator/viewtemplate/fields-info\",\"caption\":\"{{$:/language/TiddlerInfo/Fields/Caption}} (Locator)\",\"list-after\":\"$:/core/ui/TiddlerInfo/Fields\",\"tags\":\"$:/tags/TiddlerInfo\",\"type\":\"text/vnd.tiddlywiki\",\"text\":\"{{||$:/plugins/bimlas/locator/viewtemplate/field-list}}\\n\\n{{$:/plugins/bimlas/locator/buttons/open-field-settings}}\"},\"$:/plugins/bimlas/locator/viewtemplate/open-in-sidebar\":{\"title\":\"$:/plugins/bimlas/locator/viewtemplate/open-in-sidebar\",\"tags\":\"$:/tags/ViewToolbar\",\"type\":\"text/vnd.tiddlywiki\",\"caption\":\"{{$:/core/images/chevron-right}} locator sidebar\",\"description\":\"Browse hierarchy of tag in Locator sidebar\",\"list-before\":\"$:/core/ui/Buttons/open-window\",\"text\":\"\\\\whitespace trim\\r\\n<$button tooltip=\\\"Browse hierarchy of tag in Locator sidebar\\\" aria-label=\\\"locator sidebar\\\" class=<<tv-config-toolbar-class>>>\\r\\n<$vars\\r\\n  contextState=\\\"$:/state/bimlas/locator/view/context/\\\"\\r\\n  intersectionState=\\\"$:/state/bimlas/locator/view/intersection/\\\"\\r\\n  differenceState=\\\"$:/state/bimlas/locator/view/difference/\\\"\\r\\n>\\r\\n  {{||$:/plugins/bimlas/locator/actions/add-to-history}}\\r\\n</$vars>\\r\\n<$list filter=\\\"[<tv-config-toolbar-icons>prefix[yes]]\\\" variable=\\\"listItem\\\">\\r\\n{{$:/core/images/chevron-right}}\\r\\n</$list>\\r\\n<$list filter=\\\"[<tv-config-toolbar-text>prefix[yes]]\\\">\\r\\n<span class=\\\"tc-btn-text\\\">\\r\\n<$text text=\\\" \\\"/>\\r\\n<$text text=\\\"locator sidebar\\\"/>\\r\\n</span>\\r\\n</$list>\\r\\n</$button>\\r\\n\"}}}"}